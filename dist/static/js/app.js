webpackJsonp([1],[function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-panel",template:'\n<div class="panel" :class="[style ? \'panel-\' + style : \'\']">\n  <div class="panel-heading" :if="title">{{title}}</div>\n  <div class="panel-body">\n    <slot name="panel-bar"></slot>\n  </div>\n  <slot name="panel-table"></slot>\n  <slot name="panel-list"></slot>\n  <div class="panel-footer" :if="!noFooter"><slot name="panel-footer"></slot></div>\n  <slot name="panel-dialog"></slot>\n</div>\n',data:function(){return{}},props:{title:"",style:"default",noFooter:!1}}},function(e,t,n){"use strict";t.__esModule=!0;t.USER={LOGIN:"USER/LOGIN",LOGOUT:"USER/LOGOUT",DATA:"USER/DATA"},t.VIDEO={LIST:"VIDEO/LIST"}},,,,,,,,function(e,t,n){"use strict";function a(e){if(avalon.config.local){var t=$.Deferred();return e?o["default"].get(e.url,t):t.reject(),t}return e?$.ajax(s(e)):$.Deferred()}t.__esModule=!0,t["default"]=a;var i=n(43),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s=function(e){if(e.type&&"POST"==e.type.toLocaleUpperCase()&&e.data){var t=avalon.msie;t&&t<10&&(e.initialIframeSrc="./cross_domain_iframe.html",e.dataType="crossdomain",e.id="crosIframe",window.document.domain="test.com")}return e}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-alert",template:'\n<div class="alert fade" :class="[type ? \'alert-\' + type : \'\', global ? \'alert-fixed\' : \'\']" :visible="visible">\n  <button type="button" class="close" :visible="!autoClose" :click="close">&times;</button>\n  <div class="alert-body" :html="text"></div>\n</div>\n',data:function(){return{visible:!1,$timer:0,$tmp:{}}},props:{text:"",type:"info",autoClose:!0,delay:1e3,global:!1},afterCreate:function(){this.global&&(avalon.alert=this.alert)},methods:{alert:function(e){this.reset(),this.text=e.text;var t=this.$tmp;e.type&&(t.type=this.type,this.type=e.type),"undefined"!=avalon.type(e.autoClose)&&(t.autoClose=this.autoClose,this.autoClose=!!e.autoClose),e.delay&&(t.delay=this.delay,this.delay=e.delay||1e3),this.show()},reset:function(){var e=this.$tmp;e.type&&(this.type=e.type,e.type=""),e.autoClose&&(this.autoClose=e.autoClose,e.autoClose=""),e.delay&&(this.delay=e.delay,e.delay="")},show:function(){var e=this;clearTimeout(this.$timer),this.autoClose&&(this.$timer=setTimeout(function(){e.hide()},this.delay)),this.visible=!0,avalon(this.$element).addClass("in")},hide:function(){this.visible&&(clearTimeout(this.$timer),avalon(this.$element).removeClass("in"),this.visible=!1,this.reset())},close:function(e){this.hide()}}}},function(e,t,n){"use strict";t.__esModule=!0;var a=void 0,i={text:"",href:"",cb:avalon.noop};t["default"]={name:"ms-dropdown",template:'\n<div :class="[type, open && \'open\', reverse && \'dropup\']" \n     :mouseenter="toggle($event, true)" \n     :mouseleave="toggle($event, false)" \n     :click="toggle($event)">\n  <a class="dropdown-toggle btn" href="javascript:void(0)">\n    {{text}}\n    <span class="caret"></span>\n  </a>\n  <ul class="dropdown-menu">\n    <li :for="l in list" :class="{divider: !l}">\n      <a tabindex="-1" :if="!!l" \n        :attr="{href: l.href ? l.href : \'javascript:void(0)\'}" \n        :click="l.cb ? l.cb($event) : avalon.noop($event)">\n        {{l.text}}\n      </a>\n    </li>\n  </ul>\n</div>\n',data:function(){return{open:!1,$docClickCb:avalon.noop}},props:{type:"dropdown",trigger:"click",text:"",reverse:!1,list:[]},beforeCreate:function(){for(var e,t=0,n=this.list.length;t<n;t++)(e=this.list[t])&&("string"==typeof e&&(e={text:e}),this.list[t]=avalon.mix({},i,e))},methods:{onReady:function(){},toggle:function(e,t){var n=e.type;return"click"==this.trigger&&"click"==n?this.toggleClick(e):"hover"==this.trigger?this.toggleHover(e,!!t):void 0},toggleClick:function(e){var t=this,n=avalon(e.target);if(!n.is(".dropdown-toggle")&&!n.parent(".dropdown-toggle")[0])return this.open=!1,setTimeout(function(){avalon.unbind(document,"click",t.$docClickCb)}),!1;this.open||(this.open=!0,this.onOpen&&this.onOpen(),setTimeout(function(){t.$docClickCb=avalon.bind(document,"click",t.toggleClick)}))},toggleHover:function(e,t){var n=this;clearTimeout(a),a=setTimeout(function(){n.open=t,t?n.onOpen&&n.onOpen():n.onClose&&n.onClose()},200)}},events:["onOpen","onClose"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=/(?:&|\?)page=(\d+)/;t["default"]={name:"ms-pagination",template:'\n<div class="pagination text-center" style="display: none;" :visible="totalPages > 1">\n  <ul>\n    <li class="first" :visible="firstText" :class="{disabled: isDisabled(\'first\', 1)}">\n      <a :attr="{href: getHref(\'first\'), title: \'首页\'}"\n         :click="change($event, \'first\')" :html="firstText">\n      </a>\n    </li>\n    <li class="prev" :class="{disabled: isDisabled(\'prev\', 1)}">\n      <a :attr="{href: getHref(\'prev\'), title: \'上一页\'}"\n         :click="change($event, \'prev\')" :html="prevText">\n      </a>\n    </li>\n    <li :class="{active: currentPage == 1}">\n      <a :attr="{href: getHref(1), title: \'第1页\'}"\n         :click="change($event, 1)">1\n      </a>\n    </li>\n    <li><span class="omit" :if="showFirstOmit">...</span></li>\n    <li :for="page in pages" :class="{active: currentPage == page}">\n      <a :attr="{href: getHref(page), title: \'第\'+page+\'页\'}"\n         :click="change($event, page)">{{page}}\n      </a>\n    </li>\n    <li><span class="omit" :if="showLastOmit">...</span></li>\n    <li :class="{active: currentPage === totalPages}">\n      <a :attr="{href: getHref(totalPages), title: \'第\'+totalPages+\'页\'}"\n         :click="change($event, totalPages)">{{totalPages}}\n      </a>\n    </li>\n    <li class="next" :class="{disabled: isDisabled(\'next\', totalPages)}">\n      <a :attr="{href: getHref(\'next\'), title: \'下一页\'}"\n         :click="change($event, \'next\')" :html="nextText">\n      </a>\n    </li>\n    <li class="last" :visible="firstText" :class="{disabled: isDisabled(\'last\', totalPages)}">\n      <a :attr="{href:getHref(\'last\'), title: \'末页\'}"\n         :click="change($event, \'last\')" :html="lastText">\n      </a>\n    </li>\n  </ul>\n</div>\n',data:function(){return{$disable:{},pages:[],showFirstOmit:!1,showLastOmit:!1}},props:{showPages:5,totalPages:1,currentPage:1,align:-1,firstText:"",prevText:"上一页",nextText:"下一页",lastText:""},methods:{onInit:function(e){var t=this.currentPage,n=a.exec(document.location.href);n&&n[1]&&(t=~~n[1])<=0&&(t=1),this.update(t)},isDisabled:function(e,t){return this.$disable[e]=this.currentPage===t},toPage:function(e){var t=this.currentPage,n=this.totalPages;switch(e){case"first":return 1;case"prev":return Math.max(t-1,1);case"next":return Math.min(t+1,n);case"last":return n;default:return e}},getPages:function(e){var t=[],n=this.totalPages,a=this.showPages,i=e,o=e;if(n<=a)for(var s=2;s<=n-1;s++)t.push(s);else for(e>1&&e<n&&t.push(e),a-=2;;){if(t.length>=a)break;if(i>2&&t.unshift(--i),t.length>=a)break;o<n-1&&t.push(++o)}return{currentPage:e,pages:t}},getHref:function(e){return"javascript:void(0)"},update:function(e){var t=this.getPages(e);this.currentPage=t.currentPage,this.pages=t.pages,this.showFirstOmit=t.pages[0]>2,this.showLastOmit=t.pages[t.pages.length-1]<this.totalPages-1},change:function(e,t){var n=this.toPage(t);if(this.$disable[t]||t===this.currentPage)return void e.preventDefault();this.update(n),this.onPageChange&&this.onPageChange(e,this.currentPage)}},watch:{totalPages:function(){this.update(this.currentPage)}},events:["onPageChange"]}},,,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(29),o=a(i),s=n(28),l=a(s),r=n(30),c=a(r),d=n(10),u=a(d),h=n(40),p=a(h),f=n(41),v=a(f),m=n(38),g=a(m),b=n(39),y=a(b);t["default"]={name:"app",template:'\n<div>\n  <ms-header/>\n  <div class="container">\n    <div class="row">\n      <div class="span2">\n        <ms-nav />\n      </div>\n      <div class="span10">\n        <ms-view />\n      </div>\n    </div>\n    <ms-alert :widget="[{global: true}]" />\n  </div>\n  <ms-footer />\n</div>\n',data:function(){return{}},components:{Header:o["default"],Footer:l["default"],Nav:c["default"],Alert:u["default"]},directives:{Ref:p["default"],Tooltip:v["default"],Datepicker:g["default"],Placeholder:y["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return function(){var n=this;c["default"].each(t.watch,function(e,t){n["$$unwatch"].push(n.$watch(e,t))});for(var a=this.$render.directives.concat(),i=void 0;a.length;)i=a.shift(),"ref"==i.type?i.node.ref=i.expr:"widget"==i.type&&(i.node.ref&&(c["default"].each(t.components,function(e,t){if(t.name==i.is)return n.$$ref[i.node.ref]=i.comVm,!1}),delete i.node.ref),c["default"].each(t.components,function(e,t){t.name==i.is&&t.events&&c["default"].each(t.events,function(e,t){i.comVm[t]=n[t]||c["default"].noop})}),i.innerRender&&(a=a.concat(i.innerRender.directives)));e&&e.call(this)}}function o(e,t){return function(){for(;this["$$unwatch"].length;)this["$$unwatch"].pop()();e&&e.call(this)}}t.__esModule=!0;var s=n(92),l=a(s),r=n(26),c=a(r);l["default"].polyfill(),c["default"].registerComponent=function(e){if(!c["default"].components[e.name]){var t=e.data||e.defaults;delete e.data,t=c["default"].isFunction(t)?t():t||{},c["default"].isPlainObject(t)||(t={},c["default"].warn(e.name+" >> data functions should return an object")),e.computed&&(t.$computed=c["default"].mix(t.$computed||{},e.computed),delete e.computed),e.props&&(c["default"].mix(t,e.props),delete e.props),e.methods&&(c["default"].mix(t,e.methods),delete e.methods),e.events&&e.events.length&&c["default"].each(e.events,function(e,n){t[n]=c["default"].noop}),e.filters&&(c["default"].each(e.filters,function(e,t){c["default"].filters[e]||(c["default"].filters[e]=t)}),delete e.filters),t["$$ref"]={},t["$$unwatch"]=[],t.onReady=i(t.onReady,e),t.onDispose=o(t.onDispose,e),c["default"].each(e.components,function(e,t){c["default"].registerComponent(t)}),e.directives&&c["default"].each(e.directives,function(e,t){c["default"].registerDirective(t)}),c["default"].store&&(t.$store=c["default"].store),t["$$component"]=e.name,e.defaults=t,c["default"].component(e.name,e)}},c["default"].registerDirective=function(e){c["default"].directive(e.name,e)},c["default"].bootstrap=function(e){e.el&&e.component||c["default"].error("avalon.bootstrap需要提供el和component参数");var t=e.el.replace(/^#/,""),n=e.component;c["default"].registerComponent(n);var a=c["default"].define({$id:"root",$store:c["default"].store||""}),i='<xmp :controller="'+a.$id+'" :widget="{is: \''+n.name+"', id: '"+n.name+"'}\"></xmp>",o=document.getElementById(t);c["default"].innerHTML(o,i)};var d=c["default"].define;c["default"].define=function(e){var t=e["$$component"],n=void 0;t&&(n=c["default"].components[t],n.beforeCreate&&n.beforeCreate.call(e));var a=d.call(c["default"],e);return n&&n.afterCreate&&n.afterCreate.call(a),a};var u=/^([.#])?([\w-]*)$/;c["default"].fn.mix({is:function(e){var t=!1,n=u.exec(e);if(n)switch(n[1]){case".":t=this.hasClass(n[2]);break;case"#":t=this.attr("id")==n[2];break;default:t=new RegExp(n[2],"i").test(this.element.tagName)}return t},parent:function(e){var t=this.element,n=void 0;if(t)for(;(t=t.parentNode)&&9!==t.nodeType;)if(1===t.nodeType&&(n=(0,c["default"])(t),!e||n.is(e)))return n;return(0,c["default"])(null)},sibling:function(e){var t=this.element,n=t,a=void 0;if(t)for(;n;n=n.nextSibling)if(1===n.nodeType&&n!==t&&(a=(0,c["default"])(n),!e||a.is(e)))return a;return(0,c["default"])(null)}});var h={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};for(var p in h)!function(e,t){c["default"].filters[e]=function(e){return e.$return=e.which!==t,e}}(p,h[p]);t["default"]=c["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=this;this.$id="router",this.$routes={},this.route={},this.add=function(e){e.redirect?avalon.router.when(e.path,e.redirect,function(e){var t=("/"===e.path.charAt(0)?e.path:"/"+e.path)+e.query;avalon.router.navigate(t,2)}):(this.$routes[e.path]=e,avalon.router.add(e.path,function(){var e=avalon.router.vm,t=e.$routes[this.path];e.route={path:t.path,component:t.component?t.component.name:""},avalon.title.text=t.title}))},avalon.ready(function(){(e.routes||[]).forEach(function(e){e.component&&avalon.registerComponent(e.component),t.add(e)});var n=avalon.define(t);avalon.router.vm=n,avalon.history.start({hashPrefix:""})})}t.__esModule=!0;var o=n(55),s=(a(o),n(50)),l=a(s),r=n(51),c=a(r),d=n(49),u=a(d),h=n(48),p=a(h),f=n(52),v=a(f),m=n(46),g=a(m),b=n(53),y=a(b),w=n(47),k=a(w);avalon.registerComponent({name:"ms-view",template:'<div :html="component"></div>',data:function(){return{component:""}},methods:{onReady:function(e){var t=this,n=avalon.router.vm;this.update(n.route),n.$watch("route",function(e){t.update(n.route)})},update:function(e){this.component="<xmp :widget=\"{is: '"+e.component+"', id: '"+e.component+"'}\"></xmp>"}}}),t["default"]=new i({routes:[{path:["/","/#"],redirect:"//index"},{path:"/index",title:"首页",component:l["default"]},{path:"/list",title:"列表",component:c["default"]},{path:"/grid",title:"表格",component:u["default"]},{path:"/dropdown",title:"下拉菜单",component:p["default"]},{path:"/tabs",title:"标签卡",component:v["default"]},{path:"/accordion",title:"手风琴",component:g["default"]},{path:"/tooltip",title:"提示工具",component:y["default"]},{path:"/datepicker",title:"日期选择",component:k["default"]}]})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(27),l=a(s),r=n(58),c=a(r),d=n(61),u=a(d);t["default"]=new l["default"].Store((0,o["default"])({},c["default"],{modules:{video:u["default"]}}))},,,function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-footer",template:'\n<div class="footer text-center">\n  <p class="footer_cp">Copyright © 2017 版权所有<span style="margin-left: 15px;">不良信息举报电话：123456789</span></p>\n</div>\n'}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(36),l=a(s),r=n(37),c=a(r),d=void 0;t["default"]={name:"ms-header",template:'\n<div class="navbar">\n  <div class="navbar-inner">\n    <a class="brand" href="javascript:void(0)">\n      <img :if="logo" :attr="{src:logo}" />\n      <span :if="!logo" :text="title"></span>\n    </a>\n    <ul class="nav">\n      <li :for="n in navs" :class="{active: n.active}"><a :attr="{href: \'#!\' + n.path}">{{n.title}}</a></li>\n    </ul>\n    <form class="navbar-search pull-left">\n      <ms-typeahead :class="\'search-query\'" :placeholder="Search" :widget="[$typeahead]"/>\n    </form>\n    <ul class="nav pull-right">\n      <li class="dropdown" :class="{open:showUserbox}" :mouseenter="toggleUserbox(true)" :mouseleave="toggleUserbox(false)" :visible="isLogin">\n        <a href="javascript:void(0)" class="dropdown-toggle"><i class="fa fa-user"></i>{{user.nick}} <b class="caret"></b></a>\n        <ul class="dropdown-menu">\n          <li><a href="javascript:void(0)">Action</a></li>\n          <li><a href="javascript:void(0)">Another action</a></li>\n          <li><a href="javascript:void(0)">Something else here</a></li>\n          <li class="divider"></li>\n          <li><a href="javascript:void(0)">Separated link</a></li>\n        </ul>\n      </li>\n      <li class="divider-vertical"></li>\n      <li><button class="btn btn-primary" :text="loginText" :click="toggleLogin"></button></li>\n    </ul>\n  </div>\n  <ms-login :ref="login" />\n</div>\n',data:function(){return{title:"SPA",logo:"",showUserbox:!1,navs:[{title:"首页",path:"/index",active:!1}],$typeahead:{$source:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],itemLength:5}}},computed:(0,o["default"])({},avalon.store.mapState(["isLogin","user"]),{loginText:function(){return this.isLogin?"退出":"登录"}}),methods:{onReady:function(){avalon.store.dispatch("autoLogin");var e=avalon.router.vm;this.update(e.route),e.$watch("route",this.update)},update:function(e){var t=e.path;avalon.each(this.navs,function(e,n){n.active=t===n.path})},toggleLogin:function(){this.$$ref.login.init(this.isLogin)},toggleUserbox:function(e){var t=this;clearTimeout(d),d=setTimeout(function(){return t.showUserbox=e},200)}},components:{Typeahead:l["default"],Login:c["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",path:"",active:!1};t["default"]={name:"ms-nav",template:'\n<ul class="nav nav-pills nav-stacked">\n  <li :for="nav in navs" :class="{active: nav.active}">\n    <a :attr="{href:\'#!\' + nav.path}">\n      {{nav.title}}\n    </a>\n  </li>\n</ul>\n',data:function(){return{navs:[{title:"列表",path:"/list"},{title:"表格",path:"/grid"},{title:"下拉菜单",path:"/dropdown"},{title:"标签卡",path:"/tabs"},{title:"手风琴",path:"/accordion"},{title:"提示工具",path:"/tooltip"},{title:"日期选择",path:"/datepicker"}]}},beforeCreate:function(){for(var e=0,t=this.navs.length;e<t;e++)this.navs[e]=avalon.mix({},a,this.navs[e])},methods:{onReady:function(){var e=this,t=avalon.router.vm;this.update(t.route),t.$watch("route",function(n){e.update(t.route)})},update:function(e){var t=e.path;avalon.each(this.navs,function(e,n){n.active=t===n.path})}}}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",content:"",active:!1};t["default"]={name:"ms-accordion",template:'\n<div class="accordion">\n  <div class="accordion-group" :for="(i, item) in accordion">\n    <div class="accordion-heading">\n      <div class="accordion-toggle" :html="item.title" :click="toggle(item)"></div>\n    </div>\n    <div class="accordion-body collapse" :class="[item.active ? \'in\' : \'\']">\n      <div class="accordion-inner" :html="item.content"></div>\n    </div>\n  </div>\n</div>\n',data:function(){return{}},props:{accordion:[],multiple:!1},beforeCreate:function(){for(var e=0,t=0,n=this.accordion.length;t<n;t++)this.accordion[t]=avalon.mix({},a,this.accordion[t]),this.accordion[t].active&&e++;this.multiple=this.multiple||e>1},methods:{toggle:function(e){var t=this;e.active?(e.active=!1,this.onCollapse&&this.onCollapse(e.$model)):(this.multiple||avalon.each(this.accordion,function(e,n){n.active&&(n.active=!1,t.onCollapse&&t.onCollapse(n.$model))}),e.active=!0,this.onExpand&&this.onExpand(e.$model))}},events:["onExpand","onCollapse"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(11),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]=avalon.mix({},i["default"],{name:"ms-dropdown-li",template:'\n<li class="dropdown" :class="[open && \'open\', reverse && \'dropup\']" \n     :mouseenter="toggle($event, true)" \n     :mouseleave="toggle($event, false)" \n     :click="toggle($event)">\n  <a class="dropdown-toggle" href="javascript:void(0)">\n    {{text}}\n    <span class="caret"></span>\n  </a>\n  <ul class="dropdown-menu">\n    <li :for="l in list" :class="{divider: !l}">\n      <a tabindex="-1" :if="!!l" \n        :attr="{href: l.href ? l.href : \'javascript:void(0)\'}" \n        :click="l.cb ? l.cb($event) : avalon.noop($event)">\n        {{l.text}}\n      </a>\n    </li>\n  </ul>\n</li>\n'})},function(e,t,n){"use strict";t.__esModule=!0;var a=n(12),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o={field:"",title:"",width:"",sort:!1,sortOrder:"",sortFn:avalon.filters.orderBy,formatter:avalon.noop},s={selected:!1};t["default"]={name:"ms-grid",template:'\n<div>\n  <div class="text-center" :if="title">\n    <h3 :html="title"></h3>\n  </div>\n  <table class="table" :class="style">\n    <thead>\n    <tr>\n      <th :for="col in columns" :css="{width:col.width}" :click="sort(col)">\n        <div>\n          {{col.title}}\n          <span class="pull-right" :visible="col.sortOrder">\n            <i :class="[\'icon-arrow-\' + col.sortOrder]"></i>\n          </span>\n        </div>\n      </th>\n    </tr>\n    </thead>\n      <tbody>\n        <tr :for="(rowIndex, item) in rows"\n            :class="{\'info\':item.selected}" :click="toggleSelect(item)">\n            <td :for="col in columns">\n              <div :html="dealValue(item, col, rowIndex)"></div>\n            </td>\n        </tr>\n      </tbody>\n  </table>\n  <h2 class="muted text-center" :visible="!loading && rows.length === 0">暂无数据</h2>\n  <ms-pagination :ref="pagination" />\n</div>\n',data:function(){return{$lastSelect:null,$data:[],loading:!0,page:1,rows:[]}},props:{title:"",style:["table-striped","table-bordered","table-hover"],columns:[],multiple:!0,pageSize:5},beforeCreate:function(){for(var e,t=0,n=this.columns.length;t<n;t++){e=this.columns[t];for(var a in o)void 0===e[a]&&(e[a]=o[a]);e.formatter!==avalon.noop&&("datetime"===e.formatter?e.formatter=function(e){return avalon.filters.date(e,"yyyy-MM-dd HH:mm:ss")}:"date"===e.formatter&&(e.formatter=function(e){return avalon.filters.date(e,"yyyy-MM-dd")}))}},methods:{dealValue:function(e,t,n){var a=e[t.field];return t.formatter&&t.formatter!==avalon.noop?t.formatter(a,e,n):null===a||void 0===a?"":a},toggleSelect:function(e){this.multiple?(e.selected=!e.selected,e.selected&&e.onSelect&&this.onSelect(e.$model)):e.selected?(e.selected=!1,this.$lastSelect=null):(this.$lastSelect&&(this.$lastSelect.selected=!1),e.selected=!0,this.$lastSelect=e)},getSelected:function(){if(this.multiple){var e=[];return avalon.each(this.rows,function(t,n){n.selected&&e.push(n.$model)}),e}return this.$lastSelect?this.$lastSelect.$model:""},extendRowsData:function(e,t){for(var n,a=avalon.mix({},s),i=0;n=e[i];i++){"array"===avalon.type(n)&&function(){var a={};avalon.each(n,function(e,n){a[t[e]]=n}),e[i]=n=a}();for(var o in a)void 0===n[o]&&(n[o]=a[o])}return e},setData:function(e,t){var n=this.columns.map(function(e){return e.field});e=this.extendRowsData(e,n),t?Array.prototype.push.apply(this.$data,e):this.$data=e,this.loading=!1,this.update()},sort:function(e){if(e.sort){var t=void 0;avalon.each(this.columns,function(t,n){n!=e&&(n.sortOrder="")}),"down"===e.sortOrder?(e.sortOrder="up",t=1):(e.sortOrder="down",t=-1),e.sortFn&&e.sortFn!==avalon.noop&&(this.$data=e.sortFn(this.$data,e.field,t),1==this.page?this.update():this.page=1)}},update:function(){for(var e=this.$$ref.pagination,t=this.page,n=this.pageSize,a=this.$data.length,i=Math.min(a,n),o=(t-1)*n,s=[],l=o;l<a&&s.length!==i;l++)s.push(this.$data[l]);this.rows=s,e.currentPage=t,e.totalPages=Math.ceil(a/n)},onPageChange:function(e,t){this.page=t}},watch:{page:function(e){e&&this.update()},pageSize:function(){this.update()}},events:["onSelect"],components:{Pagination:i["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=avalon(document.createElement("div")).addClass("modal-backdrop fade");t["default"]={name:"ms-modal",template:'\n<div class="modal hide fade" :visible="visible">\n  <div class="modal-header">\n    <button type="button" class="close" :click="close">&times;</button>\n    <slot name="modal-title"></slot>\n  </div>\n  <div class="modal-body">\n    <slot name="modal-body"></slot>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" :click="close" :if="closeText">{{closeText}}</button>\n    <button type="button" class="btn btn-primary" :click="confirm">{{confirmText}}</button>\n  </div>\n</div>\n',data:function(){return{visible:!1,$backdrop:a}},props:{confirmText:"确定",closeText:"取消"},methods:{show:function(){this.visible||(this.visible=!0,this.$backdrop.addClass("in"),document.body.appendChild(this.$backdrop.element),avalon.msie<8&&document.body.appendChild(this.$element),avalon(this.$element).addClass("in"))},hide:function(){this.visible&&(document.body.removeChild(this.$backdrop.element),avalon(this.$element).removeClass("in"),this.$backdrop.removeClass("in"),this.visible=!1)},confirm:function(e){this.onConfirm&&!1===this.onConfirm(e)||this.hide()},close:function(e){this.onClose&&this.onClose(e),this.hide()}},events:["onConfirm","onClose"]}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",content:""};t["default"]={name:"ms-tabs",template:'\n<div class="tabs">\n  <div class="tab-header">\n    <ul class="nav nav-tabs">\n      <li :for="(i, tab) in tabs"\n          :class="[i == index ? active : \'\']"\n          :mouseenter="toggleHover(i, tab, true)"\n          :mouseleave="toggleHover(i, tab, false)"\n          :click="toggleClick(i, tab)"\n          :html="tab.title">\n      </li>\n    </ul>\n  </div>\n  <div class="tab-content">\n    <div class="tab-pane fade" \n         :for="(i, tab) in tabs"\n         :class="[i == index ? active + \' in\' : \'\']"\n         :html="tab.content"></div>\n  </div>\n</div>\n',data:function(){return{$timer:0}},props:{tabs:[],index:0,trigger:"click",delay:300,active:"active"},beforeCreate:function(){for(var e=0,t=this.tabs.length;e<t;e++)this.tabs[e]=avalon.mix({},a,this.tabs[e])},methods:{onReady:function(){},toggleHover:function(e,t,n){var a=this;this.index!=e&&"hover"==this.trigger&&(clearTimeout(this.$timer),n&&(this.$timer=setTimeout(function(){a._doSwitch(e,t)},this.delay)))},toggleClick:function(e,t){this.index!=e&&"click"==this.trigger&&this._doSwitch(e,t)},_doSwitch:function(e,t){var n=this.index;this.beforeSwitch&&!1===this.beforeSwitch(e,n)||(this.index=e,this.afterSwitch&&this.afterSwitch(e,n,t.$model))}},events:["beforeSwitch","afterSwitch"]}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-typeahead",template:'\n<input type="text" autocomplete="off" data-provide="typeahead" :duplex="value" data-duplex-changed="search" :focus="toggleInput($event, true)" :blur="toggleInput($event, false)" />\n',data:function(){return{open:!1,value:"",items:[],$search:{debounce:null,blur:null,delay:300}}},props:{$source:[],itemLength:4,minLength:1},beforeCreate:function(){},methods:{onReady:function(){var e=avalon.scan('\n<ul class="typeahead dropdown-menu">\n  <li :for="item in items">\n    <a href="javascript:void(0)" :html="item | highlighter(value)" :click="select(item)"></a>\n  </li>\n</ul>\n',this),t=e.root.dom;this.$element.parentNode.appendChild(t)},toggleInput:function(e,t){var n=this;t||(clearTimeout(this.$search.blur),this.$search.blur=setTimeout(function(){n.open=!1},this.$search.delay))},search:function(){var e=this;clearTimeout(this.$search.debounce);var t=this.value;if(!t)return this.open=!1;this.$search.debounce=setTimeout(function(){if(!(t.length<e.minLength))if(avalon.isFunction(e.$source))e.$source(t,function(t){return e.searchCb(t)});else{var n=[];avalon.each(e.$source,function(e,a){~a.toLowerCase().indexOf(t.toLowerCase())&&n.push(a)}),e.searchCb(n)}},this.$search.delay)},searchCb:function(e){e.length?(e=this.sorter(e),this.items=e.slice(0,this.itemLength),this.open=!0):this.open=!1},select:function(e){this.value=e,this.onSelect&&this.onSelect(e),this.open=!1},sorter:function(e){for(var t=this.value,n=[],a=[],i=[],o=void 0;o=e.shift();)o.toLowerCase().indexOf(t.toLowerCase())?~o.indexOf(t)?a.push(o):i.push(o):n.push(o);return n.concat(a,i)}},watch:{open:function(e){avalon(this.$element.parentNode)[(e?"add":"remove")+"Class"]("open")}},filters:{highlighter:function(e,t){return t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})}},events:["onSelect"]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(34),l=a(s),r={validateInBlur:!1,onManual:avalon.noop,onSuccess:function(e){e.forEach(function(e){var t=avalon(e.element),n=t.sibling(".help-inline");avalon.innerHTML(n.element,""),t.parent(".control-group").removeClass("error")})},onError:function(e){e.forEach(function(e){var t=avalon(e.element),n=t.sibling(".help-inline");avalon.innerHTML(n.element,e.getMessage()),t.parent(".control-group").addClass("error")})},onValidateAll:function(e){var t=this._ms_validate_.vm;e.length?this._ms_validate_.onError(e):(avalon.log("全部通过"),t.submit())}};t["default"]={name:"ms-login",template:'\n<ms-modal id="loginModal" :ref="modal" :validate="validate">\n  <div slot="modal-title">登录框</div>\n  <form class="form-horizontal" slot="modal-body">\n    <div class="control-group">\n      <label class="control-label" for="username">用户名</label>\n      <div class="controls">\n        <input type="text" class="form-control" id="username" placeholder="用户名" :duplex="username" :rules="{required:true, maxlength:24}" data-required-message="用户名必须填写" data-maxlength-message="用户名超过24字">\n        <span class="help-inline"></span>\n      </div>\n    </div>\n    <div class="control-group">\n      <label class="control-label" for="password">密码</label>\n      <div class="controls">\n        <input type="password" class="form-control" id="password" placeholder="密码" :duplex="password" :rules="{required:true}" data-required-message="密码必须填写">\n        <span class="help-inline"></span>\n      </div>\n    </div>\n    <div class="control-group">\n      <div class="controls">\n        <label class="checkbox">\n          <input type="checkbox" :duplex-checked="autoLogin" :rules="{norequired:true}"> 自动登录\n        </label>\n      </div>\n    </div>\n  </form>\n  <div slot="modal-footer" class="text-center">\n    <button type="submit" class="btn btn-default" :click="onSubmit">登录</button>\n  </div>\n</ms-modal>\n',data:function(){return{username:"",password:"",autoLogin:!1,validate:r}},methods:(0,o["default"])({},avalon.store.mapActions(["login","logout"]),{init:function(e){e?this.logout():this.$$ref.modal.show()},submit:function(){this.login({userid:"123456",usernick:this.username,autoLogin:this.autoLogin}),this.$$ref.modal.hide(),this.reset()},reset:function(){this.username="",this.password="",this.autoLogin=!1},onConfirm:function(){return this.$element._ms_validate_.vm=this,this.validate.onManual(),!1},onClose:function(){}}),components:{Modal:l["default"]}}},function(e,t,n){"use strict";function a(e){return e<10?"0"+e:e}t.__esModule=!0;var i={name:"datepicker",visible:!1,visibleYearMonth:!1,year:"",month:"",day:"",hour:"",minute:"",second:"",placement:"bottom",format:"yyyy-MM-dd hh:mm:ss",data:[],yearScope:[],$input:"",$datepicker:"",$date:"",$weekdays:["日","一","二","三","四","五","六"],$months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],$computed:{YearMonth:function(){return this.year+"年"+this.$months[this.month-1]}},dealYearScope:function(e){avalon.each(this.yearScope,function(t,n){n.value+=e})},dealYear:function(e){this.year+=e,this.dealData()},dealMonth:function(e){1===e&&12===this.month?(this.month=1,this.year++,this.yearScope[4].value<this.year&&this.dealYearScope(5)):-1===e&&1===this.month?(this.month=12,this.year--,this.yearScope[0].value>this.year&&this.dealYearScope(-5)):this.month+=e,this.dealData()},dealData:function(){var e=this.$date,t=new Date;t.setFullYear(this.year),t.setDate(1),t.setMonth(this.month-1);var n=[],a=t.getDay();0===a?t.setDate(t.getDate()-7):t.setDate(t.getDate()-a);for(var i=0,o=1;o<=42;o++){var s=n[i];if(s||(s=n[i]=[]),s.length<7){var l=t.getDate(),r=t.getMonth()+1,c=!(!e||l!==e.getDate()||r!==e.getMonth()+1||t.getFullYear()!==e.getFullYear());s.push({value:l,month:r,selected:c}),t.setDate(t.getDate()+1)}else i++,o--}this.data=n},toggleYearMonth:function(){for(var e=[],t=this.year-2;t<=this.year+3;t++)e.push({value:t});this.yearScope=e,this.visibleYearMonth=!this.visibleYearMonth},clear:function(){this.updateInput("")},cancel:function(){this.$input.value=this.$input.lastValue,this.setValue(this.$date=new Date(this.$input.lastValue.replace(/-/g,"/"))),this.visible=!this.visible},chooseYear:function(e){this.year=e,this.dealData()},chooseMonth:function(e){this.month=e,this.dealData()},chooseDay:function(e){if(e.month===this.month){avalon.each(this.data,function(e,t){var n=!1;if(avalon.each(t,function(e,t){if(t.selected)return t.selected=!1,n=!0,!1}),n)return!1}),e.selected=!0,this.day=e.value;var t=this.$date;t?(t.setFullYear(this.year),t.setMonth(this.month-1),t.setDate(e.value),t.setHours(this.hour),t.setMinutes(this.minute),t.setSeconds(this.second)):t=this.$date=this.getDate(),this.updateInput(t)}},setToday:function(){this.setValue(this.$date=new Date),this.updateInput(this.$date)},getDate:function(){return new Date(this.year+"/"+this.month+"/"+this.day+" "+this.hour+":"+this.minute+":"+this.second)},getValue:function(){var e=this.getDate();return avalon.filters.date(e,this.format)},setValue:function(e){e&&(this.year=e.getFullYear(),this.month=e.getMonth()+1,this.day=e.getDate(),this.hour=a(e.getHours()),this.minute=a(e.getMinutes()),this.second=a(e.getSeconds())),this.dealData()},updateInput:function(e){var t="";e&&(t=this.getValue(),this.onChoose(t,e)),this.$input.value=t},_onVisible:function(e){e&&!this.$input.value&&this.setValue(this.$date=new Date),this.$input.lastValue=this.$input.value},onChoose:avalon.noop},o={_queue:{},length:0,add:function(e){this._queue[e.uuid]=e,this.length++},remove:function(e){delete this._queue[e.uuid],this.length--},clickHandler:function(e){avalon.each(o._queue,function(t,n){var a=n.datepickerVM;if(a&&a.visible){avalon(e.target).parent(".datepicker").element||(a.visibleYearMonth=!1,a.visible=!1)}})},resizeHandler:function(e){avalon.each(o._queue,function(e,t){var n=t.datepickerVM;n&&t.updatePosition(n.$input,n.$datepicker,n.placement)})}};t["default"]={name:"datepicker",priority:5,init:function(){var e=this.node.dom;if("INPUT"!=e.nodeName&&"text"!=e.type)return avalon.error("指令元素必须是type为text的input");this._onEventHandler=this.onEventHandler.bind(this),avalon.bind(e,"click",this._onEventHandler),o.length||(avalon.bind(document,"click",o.clickHandler),avalon.bind(window,"resize",o.resizeHandler)),o.add(this)},beforeDispose:function(){var e=this.node.dom;avalon.unbind(e,"click",this._onEventHandler),o.remove(this),o.length||(avalon.unbind(document,"click",o.clickHandler),avalon.unbind(window,"resize",o.resizeHandler))},getPosition:function(e){return avalon.mix({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},avalon(e).offset())},updatePosition:function(e,t,n){var a=this.getPosition(e),i=t.offsetHeight,o=void 0;switch(n){case"top":o={top:a.top-i-5,left:a.left};break;default:o={top:a.top+a.height,left:a.left}}avalon(t).css(o)},onEventHandler:function(e){var t=e.currentTarget,n=(t.parentNode,this.datepickerVM);if(!n){var a=this.value,o=avalon.mix({},i,{$id:avalon.makeHashCode("datepicker"),$input:t,visible:!0},a);n=this.datepickerVM=avalon.define(o),n._onVisible(!0),n.$watch("visible",n._onVisible);var s=avalon.scan('\n<div class="datepicker dropdown-menu" \n     :css="{display: visible ? \'block\' : \'none\'}">\n  <div class="datepicker-days" style="display: block;">\n    <table class="table-condensed">\n      <thead>\n        <tr>\n          <th class="prev" :click="dealYear(-1)"><i class="icon-backward"></i></th>\n          <th class="prev" :click="dealMonth(-1)"><i class="icon-chevron-left"></i></th>\n          <th class="datepicker-switch" colSpan="3" :click="toggleYearMonth">{{YearMonth}}</th>\n          <th class="next" :click="dealMonth(1)"><i class="icon-chevron-right"></i></th>\n          <th class="next" :click="dealYear(1)"><i class="icon-forward"></i></th>\n        </tr>\n        <tr>\n          <th class="dow" :for="weekday in $weekdays">{{weekday}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr :for="el in data">\n          <td class="day" :for="day in el" :class="{old : day.month < month, \'new\': day.month > month, active: day.selected}" :click="chooseDay(day)">\n            {{day.value}}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="datepicker-year-month datepicker-dropdown dropdown-menu datepicker-orient-center datepicker-orient-bottom" :css="{display: visibleYearMonth ? \'block\' : \'none\'}">\n    <table class="table-condensed">\n      <tbody>\n        <tr :for="($index,el) in yearScope">\n          <td colSpan="2"\n              :if="$index !== yearScope.length - 1"\n              :click="chooseYear(el.value)">\n            <span :class="{active: year === el.value}">{{el.value}}年</span>\n          </td>\n          <td :if="$index === yearScope.length - 1" :click="dealYearScope(-5)">\n            <span><i class="icon-chevron-left"></i></span>\n          </td>\n          <td :if="$index === yearScope.length - 1" :click="dealYearScope(5)">\n            <span><i class="icon-chevron-right"></i></span>\n          </td>\n          <td colSpan="2" :click="chooseMonth(2 * $index + 1)">\n            <span :class="{active: month === 2 * $index + 1}">{{$months[2 * $index]}}</span>\n          </td>\n          <td colSpan="2" :click="chooseMonth(2 * $index + 2)">\n            <span :class="{active: month === 2 * $index + 2}">{{$months[2 * $index + 1]}}</span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="datepicker-time">\n    <input class="input-hour" type="text" :attr="{value: hour}" />\n    <span>:</span>\n    <input class="input-minute" type="text" :attr="{value: minute}" />\n    <span>:</span>\n    <input class="input-second" type="text" :attr="{value: second}" />\n  </div>\n  <div class="datepicker-btn">\n    <button type="button" class="btn btn-default btn-small" :click="setToday()">今天</button>\n    <button type="button" class="btn btn-default btn-small" :click="clear()">清空</button>\n    <button type="button" class="btn btn-default btn-small" :click="cancel()">取消</button>\n  </div>\n</div>\n',n),l=n.$datepicker=s.root.dom;(t.parentNode||document.body).appendChild(l),this.updatePosition(t,l,o.placement)}n.visible||(n.visible=!0),e.stopPropagation()}}},function(e,t,n){"use strict";t.__esModule=!0;var a="placeholder"in document.createElement("input");t["default"]={name:"placeholder",priority:5,init:function(){var e=this,t=this.node.dom,n=t.nodeName;if("INPUT"!=n&&"TEXTAREA"!=n)return avalon.error("placeholder指令只适用于input或textarea");var i=this.node.props;delete i["ms-placeholder"],delete i[":placeholder"];var o=this.getValue()||this.expr;t.setAttribute("placeholder",o),a||setTimeout(function(){var a=t.parentNode,i=avalon.lexer('\n<span class="wrap-placeholder" style="position:absolute; color:#ACA899; display:inline-block; overflow:hidden;">\n</span>\n'),s=avalon.vdom(i,"toDOM");a.insertBefore(s,t),s=a.firstChild;var l=avalon(t),r=avalon(s),c=t.offsetWidth,d=t.offsetHeight,u=parseInt(l.css("marginLeft")),h=parseInt(l.css("marginTop")),p=parseInt(l.css("paddingLeft")),f={fontFamily:l.css("fontFamily"),fontSize:l.css("fontSize"),marginLeft:u?u+3:3,marginTop:h||1,paddingLeft:p,width:c-u-p,height:d,lineHeight:"TEXTAREA"==n?l.css("lineWeight"):d+"px"};r.css(f),avalon.innerHTML(s,o),e.target=t,e.wrapper=s,s.onclick=function(){t.focus()},e._changeHandler=e.changeHandler.bind(e),avalon.bind(t,"input",e._changeHandler),9==avalon.msie&&(e._focusHandler=e.focusHandler.bind(e),avalon.bind(t,"focus",e._focusHandler),avalon.bind(t,"blur",e._focusHandler))},100)},changeHandler:function(){avalon(this.wrapper).css("display",""!=this.target.value?"none":"inline-block")},focusHandler:function(e){"focus"===e.type?document.addEventListener("selectionchange",this._changeHandler,!1):document.removeEventListener("selectionchange",this._changeHandler,!1)},beforeDispose:function(){var e=this.node.dom;avalon.unbind(e,"input",this._changeHandler),this.wrapper&&(this.wrapper.onclick=null),9==avalon.msie&&(avalon.unbind(e,"focus",this._onFocusChange),avalon.unbind(e,"blur",this._onFocusChange),delete this._onFocusChange,document.removeEventListener("selectionchange",this._changeHandler))}}},function(e,t,n){"use strict";t.__esModule=!0,t["default"]={name:"ref",priority:3}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",trigger:"hover",placement:"right",content:""},i={_queue:{},length:0,add:function(e){this._queue[e.uuid]=e,this.length++},remove:function(e){delete this._queue[e.uuid],this.length--},resizeHandler:function(e){avalon.each(i._queue,function(e,t){var n=t.node.dom;n.tooltip&&t.updatePosition(n,n.tooltip,t.value.placement)})}};t["default"]={name:"tooltip",priority:5,init:function(){var e=this,t=this.node.dom,n=avalon(t),o=avalon.mix({},a,this.getValue());this.eventType="focus"==o.trigger?"focus blur":"hover"==o.trigger?"mouseenter mouseleave":"click",this._onEventHandler=this.onEventHandler.bind(this),avalon.each(this.eventType.split(" "),function(t,a){n.bind(a,e._onEventHandler)}),i.length||avalon.bind(window,"resize",i.resizeHandler),i.add(this)},beforeDispose:function(){var e=this,t=this.node.dom,n=avalon(t);avalon.each(this.eventType.split(" "),function(t,a){n.unbind(a,e._onEventHandler)}),i.remove(this),i.length||avalon.unbind(window,"resize",i.resizeHandler)},getPosition:function(e){return avalon.mix({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},avalon(e).offset())},updatePosition:function(e,t,n){var a=avalon(t).removeClass("fade in top bottom left right").addClass(n).css("display","block"),i=this.getPosition(e),o=t.offsetWidth,s=t.offsetHeight,l=void 0;switch(n){case"bottom":l={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":l={top:i.top-s,left:i.left+i.width/2-o/2};break;case"left":l={top:i.top+i.height/2-s/2,left:i.left-o};break;case"right":l={top:i.top+i.height/2-s/2,left:i.left+i.width}}a.css(l).addClass("fade in")},onEventHandler:function(e){var t=e.currentTarget,n=t.parentNode,a=e.type;switch("click"==a&&(a=this.show?"click0":"click1"),a){case"mouseenter":case"focus":case"click1":var i=this.value,o=i.title,s=i.content,l=i.placement,r=s?'\n<div class="popover">\n  <div class="arrow"></div>\n  <h3 class="popover-title"></h3>\n  <div class="popover-content"></div>\n</div>\n':'\n<div class="tooltip">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"></div>\n</div>\n',c=void 0;if(t.tooltip)c=t.tooltip,n.appendChild(c);else{var d=avalon.lexer(r);n.appendChild(avalon.vdom(d,"toDOM")),c=n.lastChild,t.tooltip=c}s?(avalon.innerHTML(c.childNodes[1],o),avalon.innerHTML(c.lastChild,s)):avalon.innerHTML(c.lastChild,o),this.updatePosition(t,c,l),this.show=!0;break;case"mouseleave":case"blur":case"click0":avalon.contains(n,t.tooltip)&&n.removeChild(t.tooltip),this.show=!1}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=n(23),o=a(i),s=n(25),l=(a(s),n(24)),r=(a(l),n(22)),c=a(r);o["default"].config({debug:!0,local:!0}),o["default"].bootstrap({el:"#app",component:c["default"]})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(44),l=a(s),r=n(45),c=a(r);t["default"]=(0,o["default"])({},l["default"],c["default"],{get:function(e,t){return e&&this[e]?this[e](t):t.reject({status:404,data:{}})}})},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o=n(1),s={uid:"123456",nick:"厉害了"};t["default"]=(0,i["default"])({},o.USER.DATA,function(e){setTimeout(function(){return e.resolve({status:200,data:s})},100)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(3),o=a(i),s=n(1),l=n(20),r=a(l),c=r["default"].mock({"list|10-30":[{"id|+1":1,title:"@ctitle",poster:'@image("138x78")',create_time:'@datetime("yyyy-MM-dd HH:mm")',"status|1-3":3,"plays|100-10000":100,"comments|0-100":0,checked:!1}]}).list;t["default"]=(0,o["default"])({},s.VIDEO.LIST,function(e){setTimeout(function(){return e.resolve({status:200,data:c})},100)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(31),l=a(s),r=['<a href="javascript:void(0)">Collapsible Group Item #1</a>','<a href="javascript:void(0)">Collapsible Group Item #2</a>','<a href="javascript:void(0)">Collapsible Group Item #3</a>'],c=["<p>Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone. Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</p>\n  ","<p>Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.</p>\n  ","<p>Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.  Pitchfork sustainable tofu synth chambray yr.</p>\n  "],d=[];avalon.each(r,function(e){d.push({title:r[e],content:c[e]})}),d[0].active=!0,t["default"]={name:"ms-accordion-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <ms-accordion :widget="[accordion1]" :ref="accordion1"/>\n    <ms-accordion :widget="[accordion2]" />\n  </div>\n</ms-panel>\n',data:function(){return{accordion1:{accordion:d},accordion2:{accordion:d,multiple:!0}}},methods:{onExpand:function(e){},onCollapse:function(e){}},components:{Panel:o["default"],Accordion:l["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-datepicker-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <input type="text" :datepicker="{placement: \'bottom\'}" />\n    <input type="text" :datepicker="{placement: \'top\'}" />\n  </div>\n</ms-panel>\n',data:function(){return{}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(11),l=a(s),r=n(32),c=a(r);t["default"]={name:"ms-dropdown-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <ms-dropdown :for="d in dropdowns" :widget="[d]" />\n    <ul class="nav nav-pills">\n      <li class="active"><a href="#">Regular link</a></li>\n      <ms-dropdown-li :for="d in dropdownlis" :widget="[d]" />\n    </ul>\n  </div>\n</ms-panel>\n',data:function(){return{dropdowns:[{type:"btn-group",text:"abc",list:["1","2","","3","4"]},{text:"efg",trigger:"hover",reverse:!0,list:[{text:"baidu",href:"http://www.baidu.com",cb:function(e){return e.preventDefault()}},{text:"qq",href:"http://www.qq.com"}]}],dropdownlis:[{text:"abc",list:["1","2","","3","4"],reverse:!0},{text:"efg",trigger:"hover",list:[{text:"baidu",href:"http://www.baidu.com",cb:function(e){return e.preventDefault()}},"",{text:"qq",href:"http://www.qq.com"}]}]}},components:{Panel:o["default"],Dropdown:l["default"],DropdownLi:c["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(33),l=a(s),r=n(10),c=a(r),d=n(20),u=a(d);t["default"]={name:"ms-grid-panel",template:'\n<ms-panel>\n  <div slot="panel-bar">\n    <ms-grid :widget="[$grid1]" :ref="grid1" />\n    <button class="btn" :click="getSelected(1)">获取选中项全局输出</button>\n    <button class="btn" :click="addData()">追加数据</button>\n    <ms-grid :widget="[$grid2]" :ref="grid2" />\n    <button class="btn" :click="getSelected(2)">获取选中项当前输出</button>\n    <ms-alert :ref="msg" />\n  </div>\n</ms-panel>\n',data:function(){return{$grid1:{title:"表格1",columns:[{field:"a1",title:"a1",sort:!0},{field:"a2",title:"a2"},{field:"a3",title:"a3"}],multiple:!1},$grid2:{title:"表格2",columns:[{field:"a1",title:"a1"},{field:"a2",title:"a2",sort:!0},{field:"a3",title:"a3",sort:!0}],pageSize:8},getSelected:function(e){1==e?avalon.alert({text:avalon._quote(this.$$ref.grid1.getSelected())}):2==e&&this.$$ref.msg.alert({text:avalon._quote(this.$$ref.grid2.getSelected()),autoClose:!1})},addData:function(){this.$$ref.grid1.setData(u["default"].mock({"list|10":[{"id|+1":11,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list,!0)}}},methods:{onReady:function(){this.$$ref.grid1.setData(u["default"].mock({"list|10":[{"id|+1":1,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list),this.$$ref.grid2.setData(u["default"].mock({"list|10-30":[{"id|+1":1,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list)}},components:{Panel:o["default"],Grid:l["default"],Alert:c["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-index-panel",template:'\n<ms-panel :widget="[$panel]" :ref="panel">\n  <div slot="panel-bar">\n    <p>该项目不直接修改avalon2源码，只是在其基础上扩展。<a href="https://github.com/hmhao/avalon2-webpack2-spa">项目Github地址</a></p>\n    <h3>说明</h3>\n    <ul>\n      <li>整合avalon2和webpack2，支持webpack热更新</li>\n      <li>兼容性支持IE8以下，IE8以下禁用热更新，需要手动刷新</li>\n      <li>[采用ES6、类vue的单文件组件书写](#component)\n      （avalon组件只使用defaults来定义组件VM的属性与方法，在书写时非常混乱）</li>\n      <li>加入官网路由并改造</li>\n      <li>加入es6-promise、cookie_js、<a href="https://github.com/hmhao/avalonx">avalonx</a></li>\n    </ul>\n    <h3>组件书写</h3>\n    <ul>\n      <li>data：组件内部属性</li>\n      <li>props：来自父组件的数据</li>\n      <li>computed：组件计算属性</li>\n      <li>methods：组件方法及钩子函数</li>\n      <li>watch：组件内部观察属性变化</li>\n      <li>filters：组件自定义过滤器</li>\n      <li>events：组件对外分发事件的声明</li>\n      <li>components：组件依赖的子组件</li>\n      <li>beforeCreate：组件创建vm前会调用，可用于vm数据校验或补充</li>\n      <li>afterCreate：组件创建vm后会调用</li>\n    </ul>\n  </div>\n</ms-panel>\n',data:function(){return{$panel:{noFooter:!0}}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(0),l=a(s),r=n(12),c=a(r),d={1:"上传",2:"审核",3:"发行"};t["default"]={name:"ms-list",template:'\n<ms-panel :widget="{title: \'列表\'}">\n  <div slot="panel-bar">\n    <div class="row">\n      <div class="span3">\n        <div class="input-prepend">\n          <span class="add-on">排序</span>\n          <select class="span2" :duplex="video.sort">\n            <option :for="sort in video.$sort" :attr="{value: sort.key}">{{sort.text}}</option>\n          </select>\n        </div>\n      </div>\n      <div class="span3">\n        <div class="input-prepend">\n          <span class="add-on">过滤</span>\n          <select class="span2" :duplex-number="video.filter">\n            <option :for="filter in video.$filter" :attr="{value: filter.value}">{{filter.text}}</option>\n          </select>\n        </div>\n      </div>\n      <div class="btn-group pull-right">\n        \n      </div>\n    </div>\n  </div>\n  <table class="table table-bordered" slot="panel-table">\n    <thead>\n      <tr class="text-center">\n        <td><input type="checkbox" :attr="{checked: allChecked}" :click="checkAll"/></td>\n        <td>列表</td>\n        <td>状态</td>\n        <td>热度</td>\n        <td>操作</td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr :for="(i, v) in list">\n        <td>\n          <input type="checkbox" :attr="{checked: v.checked}" :click="checkOne($event, v)"/>\n        </td>\n        <td style="width: 60%">\n          <div class="media">\n            <a class="pull-left" href="javascript:void(0)">\n              <img class="media-object" style="width: 138px; height: 78px;" :attr="{src: v.poster}">\n            </a>\n            <div class="media-body text-left">\n              <dl>\n                <dt :attr="{title: v.title}">{{v.title}}</dt>\n                <dd>{{v.create_time}}</dd>\n              </dl>\n            </div>\n          </div>\n        </td>\n        <td>\n          <p>{{v.status | statusMsg}}</p>\n        </td>\n        <td>\n          <p><i class="glyphicon glyphicon-expand"></i>{{v.plays}}</p>\n          <p><i class="glyphicon glyphicon-comment"></i>{{v.comments}}</p>\n        </td>\n        <td>\n          <p><a href="javascript:void(0)" :click="edit">编辑</a></p>\n          <p><a href="javascript:void(0)" :click="remove">删除</a></p>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ms-pagination :ref="pagination" slot="panel-footer"></ms-pagination>\n</ms-panel>\n',data:function(){return{allChecked:!1,list:[]}},computed:(0,o["default"])({},avalon.store.mapState(["video"])),methods:(0,o["default"])({},avalon.store.mapActions(["getVideoList"]),{onReady:function(){var e=this;this.getVideoList().done(function(t){t&&200==t.status&&(e.video.page=1)})},onDispose:function(){this.video.page=-1},checkAll:function(e){var t=this.allChecked=!this.allChecked;this.list.forEach(function(e){e.checked=t})},checkOne:function(e,t){var n=t.checked=!t.checked;this.allChecked=!1!==n&&this.list.every(function(e){return e.checked})},update:function(){var e=this.video,t=e.page,n=e.sort,a=e.filter,i=[];avalon.each(e.$list,function(e,t){a&&t.status!=a||i.push(t)}),i.sort(function(e,t){return"new"==n?new Date(e.create_time)<new Date(t.create_time)?1:-1:"hot"==n?parseInt(e.plays)<parseInt(t.plays)?1:-1:e.id<t.id?1:-1});for(var o=i.length,s=Math.min(o,e.$perNum),l=(t-1)*e.$perNum,r=[],c=l;c<o&&r.length!==s;c++)r.push(i[c]);this.list=r;var d=this.$$ref.pagination;d.currentPage=t,d.totalPages=Math.ceil(o/e.$perNum)},edit:function(){},remove:function(){},onPageChange:function(e,t){this.video.page=t}}),watch:{"video.page":function(e){e&&this.update()},"video.sort":function(e){this.video.page=1,this.update()},"video.filter":function(e){this.video.page=1,this.update()}},filters:{statusMsg:function(e){return d[e]||"未知错误"}},components:{Panel:l["default"],Pagination:c["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(35),l=a(s),r=['<a href="javascript:void(0)">Tab1</a>','<a href="javascript:void(0)">Tab2</a>','<a href="javascript:void(0)">Tab3</a>'],c=["<p>Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone. Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</p>\n  ","<p>Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.</p>\n  ","<p>Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.  Pitchfork sustainable tofu synth chambray yr.</p>\n  "],d=[];avalon.each(r,function(e,t){d.push({title:r[e],content:c[e]})}),t["default"]={name:"ms-tabs-panel",template:'\n<ms-panel :ref="panel">\n  <div slot="panel-bar">\n    <ms-tabs :widget="[tabs1]" :ref="tabs1" />\n    <ms-tabs :widget="[tabs2]" :ref="tabs2" />\n  </div>\n</ms-panel>\n',data:function(){return{tabs1:{tabs:d,index:0,trigger:"hover",delay:500},tabs2:{tabs:d,index:0,trigger:"click"}}},methods:{beforeSwitch:function(e,t){},afterSwitch:function(e,t){}},components:{Panel:o["default"],Tabs:l["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-tooltip-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <a class="btn" :for="type in tooltip" :tooltip="{title: \'tooltip \' + type, trigger: \'hover\', placement: type}">tooltip {{type}}</a>\n    <br>\n    <a class="btn" :for="type in popover" :tooltip="{title: \'popover \' + type, trigger: \'click\', placement: type, content: \'content 123456789\'}">popover {{type}}</a>\n  </div>\n</ms-panel>\n',data:function(){return{tooltip:["left","top","bottom","right"],popover:["left","top","bottom","right"]}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e.replace(/[^#]+#?!?/,"")}function i(e){for(var t,n=document.getElementsByTagName("A"),a=0;t=n[a++];)if(t.name===e)return t}function o(e){var t=avalon(e).css("position");return"fixed"!==t?0:e.getBoundingClientRect().bottom}function s(e){var t=document.getElementById(e);if(t||(t=i(e)),t){t.scrollIntoView();var n=o(t);if(n){var a=t.getBoundingClientRect().top;window.scrollBy(0,a-n.top)}}else window.scrollTo(0,0)}var l=avalon.msie<=7,r=!!window.history.pushState,c=!(!("onhashchange"in window)||window.VBArray&&l),d={root:"/",html5:!1,hashPrefix:"!",iframeID:null,interval:50,autoScroll:!1},u={text:document.title,timer:null,delay:200},h={isinit:!0,hash:a(document.location.href),check:function(){a(document.location.href)!==this.hash&&this.onHashChanged()},start:function(e){if(this.started)throw new Error("avalon.history has already been started");this.started=!0,"boolean"==typeof e&&(e={html5:e}),e=avalon.mix({},d,e||{}),e.fireAnchor&&(e.autoScroll=!0);var t=e.root;/^\//.test(t)||avalon.error("root配置项必须以/字符开始, 以非/字符结束"),t.length>1&&(e.root=t.replace(/\/$/,""));var n=e.html5;switch(this.options=e,this.mode=n?"popstate":"hashchange",r||(n&&avalon.warn("浏览器不支持HTML5 pushState，平稳退化到onhashchange!"),this.mode="hashchange"),c||(this.mode="iframepoll"),avalon.log("avalon run mmHistory in the ",this.mode,"mode"),this.mode){case"popstate":setTimeout(function(){window.onpopstate=h.onHashChanged},500);break;case"hashchange":window.onhashchange=h.onHashChanged;break;case"iframepoll":avalon.ready(function(){var t=document.createElement("iframe");if(t.id=e.iframeID||avalon.makeHashCode("ifr"),t.style.display="none",document.body.appendChild(t),h.iframe=t,h.writeFrame(a(document.location.href)),avalon.msie){var n=function(){"location"===event.propertyName&&setTimeout(function(){h.check()},1)};document.attachEvent("onpropertychange",n),h.onPropertyChange=n}h.intervalID=window.setInterval(function(){h.check()},e.interval)})}this.onHashChanged(),this.isinit=!1},stop:function(){switch(this.mode){case"popstate":window.onpopstate=avalon.noop;break;case"hashchange":window.onhashchange=avalon.noop;break;case"iframepoll":this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this.onPropertyChange&&document.detachEvent("onpropertychange",this.onPropertyChange),clearInterval(this.intervalID)}this.started=!1},setHash:function(e,t){switch(this.mode){case"iframepoll":if(t){var n=this.iframe;n&&(n.contentWindow._hash=e)}else this.writeFrame(e);break;case"popstate":var a=(this.options.root+"/"+e).replace(/\/+/g,"/"),i=t?"replaceState":"pushState";history[i]({},document.title,a),this.onHashChanged();break;default:var o=this.options.hashPrefix+e;t&&document.location.hash!==o&&history.back(),document.location.hash=o}},writeFrame:function(e){var t=h.iframe;try{var n=t.contentDocument||t.contentWindow.document}catch(t){var a=window.document.location,i=a.hash.substring(1),o=a.href;return window.document.location=o.replace(i,e),window.document.location.reload()}n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.avalon.history.syncHash;<\/script>"),n.close()},syncHash:function(){var e=this._hash;return e!==a(document.location.href)&&(document.location.hash=e),this},getPath:function(){var e=document.location.pathname.replace(this.options.root,"");return"/"!==e.charAt(0)&&(e="/"+e),e},onHashChanged:function(e,t){t||(e="popstate"===h.mode?h.getPath():document.location.href.replace(/[^#]+#?!?/,"")),e=decodeURIComponent(e),e="/"===e.charAt(0)?e:"/"+e,(e!==h.hash||h.isinit)&&(h.hash=e,avalon.router&&(e=avalon.router.navigate(e,0)),t&&h.setHash(e),t&&h.options.autoScroll&&s(e.slice(1))),clearTimeout(u.timer),u.timer=setTimeout(function(){document.title!==u.text&&(document.title=u.text)},u.delay)}};avalon.bind(document,"click",function(e){if(h.started&&!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)&&!1!==e.returnValue){for(var t=e.path?e.path[0]:e.target||e.srcElement||{};"A"!==t.nodeName;)if(!(t=t.parentNode)||"BODY"===t.tagName)return;var n=t.getAttribute("href",2)||t.getAttribute("xlink:href")||"";"#!"===n.slice(0,2)&&null==t.getAttribute("download")&&"external"!==t.getAttribute("rel")&&(n.indexOf("mailto:")>-1||t.target&&"_self"!==t.target||(e.preventDefault(),h.onHashChanged(n.replace("#!",""),!0)))}}),avalon.title=u,e.exports=avalon.history=h},function(e,t,n){"use strict";function a(){this.rules=[]}function i(e){var t=e.split("?"),n={},a=t[0],i=t[1];if(i)for(var o,s=i.split("&"),l=s.length,r=0;r<l;r++)s[r]&&(o=s[r].split("="),n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]));return{path:a,query:n}}function o(e){return"/"===e||("string"==typeof e&&e.length>1&&"/"===e.charAt(0)||void 0)}function s(e){if("string"==typeof e)return e;var t=[];for(var n in e)"query"!==n&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function l(e,t,n){var a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;var i=n?"?":"";return a+i+"("+t+")"+i}var r=(n(54),n(56)),c=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;a.prototype=r,avalon.mix(r,{error:function(e){this.errorback=e},_pathToRegExp:function(e,t){for(var n,a,i,o,s=t.keys=[],r="^",d=0;n=c.exec(e);){a=n[2]||n[3],i=n[4]||("*"==n[1]?".*":"string"),o=e.substring(d,n.index);var u=this.$types[i],h={name:a};u&&(i=u.pattern,h.decode=u.decode),s.push(h),r+=l(o,i,!1),d=c.lastIndex}o=e.substring(d),r+=l(o)+(t.strict?t.last:"/?")+"$";var p="boolean"!=typeof t.caseInsensitive||t.caseInsensitive;return t.regexp=new RegExp(r,p?"i":void 0),t},add:function(e,t,n){var a=this.rules;"/"!==e.charAt(0)&&avalon.error("avalon.router.add的第一个参数必须以/开头"),n=n||{},n.callback=t,e.length>2&&"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1),n.last="/"),avalon.Array.ensure(a,this._pathToRegExp(e,n))},route:function(e,t){e=e.trim();for(var n,a=this.rules,i=0;n=a[i++];){var o=e.match(n.regexp);if(o){n.query=t||{},n.path=e,n.params={};var s=n.keys;return o.shift(),s.length&&this._parseArgs(o,n),n.callback.apply(n,o)}}this.errorback&&this.errorback()},_parseArgs:function(e,t){for(var n=t.keys,a=0,i=n.length;a<i;a++){var o=n[a],s=e[a]||"";if("function"==typeof o.decode)var l=o.decode(s);else try{l=JSON.parse(s)}catch(e){l=s}e[a]=t.params[o.name]=l}},navigate:function(e,t){var n=i(e),a=this.route(n.path,n.query);return o(a)&&(e=a),avalon.router.setLastPath(e),1===t?avalon.history.setHash(e,!0):2===t&&avalon.history.setHash(e),e},when:function(e,t,n){var a=this,e=e instanceof Array?e:[e];return avalon.each(e,function(e,i){a.add(i,function(){var e=a.urlFormate(t,this.params,this.query);n?n.call(a,e):a.navigate(e.path+e.query)})}),this},urlFormate:function(e,t,n){var n=n?s(n):"";return{path:e.replace(c,function(e){var n=e.replace(/[\{\}]/g,"").split(":");return n=n[0]?n[0]:n[1],void 0!==t[n]?t[n]:""}).replace(/^\//g,""),query:n}},$types:{date:{pattern:"[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])",decode:function(e){return new Date(e.replace(/\-/g,"/"))}},string:{pattern:"[^\\/]*",decode:function(e){return e}},bool:{decode:function(e){return 0!==parseInt(e,10)},pattern:"0|1"},"int":{decode:function(e){return parseInt(e,10)},pattern:"\\d+"}}}),e.exports=avalon.router=new a},function(e,t,n){"use strict";function a(e){return String(e).replace(/[,;"\\=\s%]/g,function(e){return encodeURIComponent(e)})}var i={};if(function(){try{return localStorage.setItem("avalon",1),localStorage.removeItem("avalon"),!0}catch(e){return!1}}()){i.getLastPath=function(){return localStorage.getItem("msLastPath")};var o;i.setLastPath=function(e){o&&(clearTimeout(o),o=null),localStorage.setItem("msLastPath",e),o=setTimeout(function(){localStorage.removItem("msLastPath")},864e5)}}else{var s=function(e,t){var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=a(e)+"="+a(t)+";expires="+n.toGMTString()},l=function(e){var t=String(document.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))||["",""];return decodeURIComponent(t[1])};i.getLastPath=function(){return l.getItem("msLastPath")},i.setLastPath=function(e){s("msLastPath",e)}}e.exports=i},function(e,t,n){"use strict";t.__esModule=!0;var a=n(1),i=n(9),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s={autoLogin:function(e){var t=e.state,n=e.commit;t.autoLogin&&(n(a.USER.LOGIN),s.getUserData({state:t,commit:n}))},login:function(e,t){var n=e.state,i=e.commit;n.isLogin||(i(a.USER.LOGIN,t),s.getUserData({state:n,commit:i}))},logout:function(e){var t=e.state,n=e.commit;t.isLogin&&n(a.USER.LOGOUT)},getUserData:function(e){var t=e.state,n=e.commit;return(0,o["default"])({url:a.USER.DATA,dataType:"jsonp",jsonp:"callback",data:{uid:t.user.uid}}).done(function(e){e&&200==e.status&&n(a.USER.DATA,e.data)}).fail(function(e){avalon.log(e)})}};t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(59),o=a(i),s=n(57),l=a(s),r=n(19);t["default"]={state:{isLogin:!1,autoLogin:"1"==r.cookie.get("autoLogin"),user:{uid:"",nick:"",avatar:""}},mutations:o["default"],actions:l["default"]}},function(e,t,n){"use strict";t.__esModule=!0;var a,i=n(3),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s=n(1),l=n(19),r=(a={},(0,o["default"])(a,s.USER.LOGIN,function(e,t){e.isLogin=!0,t?(e.user={uid:t.userid,nick:t.usernick},t.autoLogin&&(l.cookie.set("userid",t.userid),l.cookie.set("usernick",t.usernick),l.cookie.set("autoLogin",1))):e.user={uid:l.cookie.get("userid",0),nick:l.cookie.get("usernick","")}}),(0,o["default"])(a,s.USER.LOGOUT,function(e){e.isLogin=!1,e.autoLogin=!1,l.cookie.set("userid",0),l.cookie.set("usernick",""),l.cookie.set("autoLogin",0),e.user={uid:"",nick:"",avatar:""}}),(0,o["default"])(a,s.USER.DATA,function(e,t){var n=e.user;delete t.uid,avalon.mix(n,t)}),a);t["default"]=r},function(e,t,n){"use strict";t.__esModule=!0;var a=n(1),i=n(9),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s={getVideoList:function(e,t){var n=(e.state,e.commit);return(0,o["default"])({url:a.VIDEO.LIST,dataType:"jsonp",jsonp:"callback",data:t}).done(function(e){e&&200==e.status&&n(a.VIDEO.LIST,e.data)}).fail(function(e){avalon.log(e)})}};t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(62),o=a(i),s=n(60),l=a(s);t["default"]={state:{$sort:[{key:"new",text:"最新"},{key:"hot",text:"最热"}],sort:"new",$filter:[{key:"all",text:"全部",value:0},{key:"upload",text:"上传",value:1},{key:"audit",text:"审核",value:2},{key:"publish",text:"发行",value:3}],filter:0,$perNum:4,page:-1,$list:[]},mutations:o["default"],actions:l["default"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o=n(1),s=(0,i["default"])({},o.VIDEO.LIST,function(e,t){e.$list=t});t["default"]=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){}],[42]);