webpackJsonp([2],[function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-panel",template:'\n<div class="panel" :class="[style ? \'panel-\' + style : \'\']">\n  <div class="panel-heading" :if="title">{{title}}</div>\n  <div class="panel-body">\n    <slot name="panel-bar"></slot>\n  </div>\n  <slot name="panel-table"></slot>\n  <slot name="panel-list"></slot>\n  <div class="panel-footer" :if="!noFooter"><slot name="panel-footer"></slot></div>\n  <slot name="panel-dialog"></slot>\n</div>\n',data:function(){return{}},props:{title:"",style:"default",noFooter:!1}}},function(e,t,n){"use strict";t.__esModule=!0;t.USER={LOGIN:"USER/LOGIN",LOGOUT:"USER/LOGOUT",DATA:"USER/DATA"},t.VIDEO={LIST:"VIDEO/LIST"}},,,,,,,,function(e,t,n){"use strict";function a(e){if(avalon.config.local){var t=$.Deferred();return e?o["default"].get(e.url,t):t.reject(),t}return e?$.ajax(s(e)):$.Deferred()}t.__esModule=!0,t["default"]=a;var i=n(43),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s=function(e){if(e.type&&"POST"==e.type.toLocaleUpperCase()&&e.data){var t=avalon.msie;t&&t<10&&(e.initialIframeSrc="./cross_domain_iframe.html",e.dataType="crossdomain",e.id="crosIframe",window.document.domain="test.com")}return e}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-alert",template:'\n<div class="alert fade" :class="[type ? \'alert-\' + type : \'\', global ? \'alert-fixed\' : \'\']" :visible="visible">\n  <button type="button" class="close" :visible="!autoClose" :click="close">&times;</button>\n  <div class="alert-body" :html="text"></div>\n</div>\n',data:function(){return{visible:!1,$timer:0,$tmp:{}}},props:{text:"",type:"info",autoClose:!0,delay:1e3,global:!1},afterCreate:function(){this.global&&(avalon.alert=this.alert)},methods:{alert:function(e){this.reset(),this.text=e.text;var t=this.$tmp;e.type&&(t.type=this.type,this.type=e.type),"undefined"!=avalon.type(e.autoClose)&&(t.autoClose=this.autoClose,this.autoClose=!!e.autoClose),e.delay&&(t.delay=this.delay,this.delay=e.delay||1e3),this.show()},reset:function(){var e=this.$tmp;e.type&&(this.type=e.type,e.type=""),e.autoClose&&(this.autoClose=e.autoClose,e.autoClose=""),e.delay&&(this.delay=e.delay,e.delay="")},show:function(){var e=this;clearTimeout(this.$timer),this.autoClose&&(this.$timer=setTimeout(function(){e.hide()},this.delay)),this.visible=!0,avalon(this.$element).addClass("in")},hide:function(){this.visible&&(clearTimeout(this.$timer),avalon(this.$element).removeClass("in"),this.visible=!1,this.reset())},close:function(e){this.hide()}}}},function(e,t,n){"use strict";function a(e){return e<10?"0"+e:e}t.__esModule=!0;t["default"]={name:"ms-datepicker",template:'\n<div class="datepicker" :class="[$directive ? \'dropdown-menu\' : \'datepicker-inline\']">\n  <div class="datepicker-days" style="display: block;">\n    <table class="table-condensed">\n      <thead>\n        <tr>\n          <th class="prev" :click="dealYear(-1)"><i class="icon-backward"></i></th>\n          <th class="prev" :click="dealMonth(-1)"><i class="icon-chevron-left"></i></th>\n          <th class="datepicker-switch" colSpan="3" :click="toggleYearMonth" :class="{active: visibleYearMonth}">{{YearMonth}}</th>\n          <th class="next" :click="dealMonth(1)"><i class="icon-chevron-right"></i></th>\n          <th class="next" :click="dealYear(1)"><i class="icon-forward"></i></th>\n        </tr>\n        <tr>\n          <th class="dow" :for="weekday in $weekdays">{{weekday}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr :for="el in data">\n          <td class="day" :for="day in el" :class="{old : day.month < month, \'new\': day.month > month, active: day.selected}" :click="chooseDay(day)">\n            {{day.value}}\n          </td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr :visible="$timesActive">\n          <th colSpan="7">\n            <div class="datepicker-time">\n              <input class="input-hour" type="text" maxLength="2" :duplex="hour | change" :change="changeTime($event, \'hour\')"/>\n              <span>:</span>\n              <input class="input-minute" type="text" maxLength="2" :duplex="minute | change" :change="changeTime($event, \'minute\')"/>\n              <span>:</span>\n              <input class="input-second" type="text" maxLength="2" :duplex="second | change" :change="changeTime($event, \'second\')" />\n            </div>\n          </th>\n        </tr>\n        <tr>\n          <th class="today" colSpan="7" :visible="!$directive" :click="setToday()">今天</th>\n          <th colSpan="7" :visible="$directive">\n            <div class="datepicker-btn">\n              <button type="button" class="btn btn-default" :click="setToday()">今天</button>\n              <button type="button" class="btn btn-default" :click="clear()">清空</button>\n              <button type="button" class="btn btn-default" :click="cancel()">取消</button>\n            </div>\n          </th>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n  <div class="datepicker-year-month datepicker-dropdown dropdown-menu datepicker-orient-center datepicker-orient-bottom" :css="{display: visibleYearMonth ? \'block\' : \'none\'}">\n    <table class="table-condensed">\n      <tbody>\n        <tr :for="($index,el) in yearScope">\n          <td colSpan="2"\n              :if="$index !== yearScope.length - 1"\n              :click="chooseYear(el.value)">\n            <span :class="{active: year === el.value}">{{el.value}}年</span>\n          </td>\n          <td :if="$index === yearScope.length - 1" :click="dealYearScope(-5)">\n            <span><i class="icon-chevron-left"></i></span>\n          </td>\n          <td :if="$index === yearScope.length - 1" :click="dealYearScope(5)">\n            <span><i class="icon-chevron-right"></i></span>\n          </td>\n          <td colSpan="2" :click="chooseMonth(2 * $index + 1)">\n            <span :class="{active: month === 2 * $index + 1}">{{$months[2 * $index]}}</span>\n          </td>\n          <td colSpan="2" :click="chooseMonth(2 * $index + 2)">\n            <span :class="{active: month === 2 * $index + 2}">{{$months[2 * $index + 1]}}</span>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',data:function(){return{visibleYearMonth:!1,year:"",month:"",day:"",hour:"",minute:"",second:"",data:[],yearScope:[],$weekdays:["日","一","二","三","四","五","六"],$months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}},props:{$directive:!1,$timesActive:!1,$date:"",format:"yyyy-MM-dd HH:mm:ss"},computed:{YearMonth:function(){return this.year?this.year+"年"+this.$months[this.month-1]:""}},methods:{onReady:function(){if(this.$date&&"string"===avalon.type(this.$date))try{this.$date=new Date(this.$date)}catch(e){this.$date=new Date}this.$date instanceof Date||(this.$date=new Date),this.setValue(this.$date)},onDispose:function(){},dealYearScope:function(e){avalon.each(this.yearScope,function(t,n){n.value+=e})},dealYear:function(e){this.year+=e,this.dealData()},dealMonth:function(e){1===e&&12===this.month?(this.month=1,this.year++,this.yearScope[4].value<this.year&&this.dealYearScope(5)):-1===e&&1===this.month?(this.month=12,this.year--,this.yearScope[0].value>this.year&&this.dealYearScope(-5)):this.month+=e,this.dealData()},dealData:function(){var e=this.$date,t=new Date;t.setFullYear(this.year),t.setDate(1),t.setMonth(this.month-1);var n=[],a=t.getDay();0===a?t.setDate(t.getDate()-7):t.setDate(t.getDate()-a);for(var i=0,o=1;o<=42;o++){var s=n[i];if(s||(s=n[i]=[]),s.length<7){var l=t.getDate(),r=t.getMonth()+1,c=!(!e||l!==e.getDate()||r!==e.getMonth()+1||t.getFullYear()!==e.getFullYear());s.push({value:l,month:r,selected:c}),t.setDate(t.getDate()+1)}else i++,o--}this.data=n},toggleYearMonth:function(){for(var e=[],t=this.year-2;t<=this.year+3;t++)e.push({value:t});this.yearScope=e,this.visibleYearMonth=!this.visibleYearMonth},clear:function(){this.onClear()},cancel:function(){this.onCancel()},chooseYear:function(e){this.year=e,this.dealData()},chooseMonth:function(e){this.month=e,this.dealData()},chooseDay:function(e){if(e.month===this.month){avalon.each(this.data,function(e,t){var n=!1;if(avalon.each(t,function(e,t){if(t.selected)return t.selected=!1,n=!0,!1}),n)return!1}),e.selected=!0,this.day=e.value;var t=this.$date;t?(t.setFullYear(this.year),t.setMonth(this.month-1),t.setDate(e.value),t.setHours(this.hour),t.setMinutes(this.minute),t.setSeconds(this.second)):t=this.$date=this.getDate(),this.onChoose(this.getValue(),t)}},changeTime:function(e,t){var n=e.currentTarget.value,i=this.$date;switch(t){case"hour":this.hour=a(parseInt(n)%24||0),i.setHours(this.hour);break;case"minute":this.minute=a(parseInt(n)%60||0),i.setMinutes(this.minute);break;case"second":this.second=a(parseInt(n)%60||0),i.setSeconds(this.second)}this.onChoose(this.getValue(),this.$date)},setToday:function(){this.setValue(this.$date=new Date),this.onChoose(this.getValue(),this.$date)},getDate:function(){return new Date(this.year+"/"+this.month+"/"+this.day+" "+this.hour+":"+this.minute+":"+this.second)},getValue:function(){var e=this.getDate();return avalon.filters.date(e,this.format)},setValue:function(e){e&&(this.year=e.getFullYear(),this.month=e.getMonth()+1,this.day=e.getDate(),this.hour=a(e.getHours()),this.minute=a(e.getMinutes()),this.second=a(e.getSeconds())),this.dealData()}},events:["onChoose","onClear","onCancel"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=/(?:&|\?)page=(\d+)/;t["default"]={name:"ms-pagination",template:'\n<div class="pagination text-center" style="display: none;" :visible="totalPages > 1">\n  <ul>\n    <li class="first" :visible="firstText" :class="{disabled: isDisabled(\'first\', 1)}">\n      <a :attr="{href: getHref(\'first\'), title: \'首页\'}"\n         :click="change($event, \'first\')" :html="firstText">\n      </a>\n    </li>\n    <li class="prev" :class="{disabled: isDisabled(\'prev\', 1)}">\n      <a :attr="{href: getHref(\'prev\'), title: \'上一页\'}"\n         :click="change($event, \'prev\')" :html="prevText">\n      </a>\n    </li>\n    <li :class="{active: currentPage == 1}">\n      <a :attr="{href: getHref(1), title: \'第1页\'}"\n         :click="change($event, 1)">1\n      </a>\n    </li>\n    <li><span class="omit" :if="showFirstOmit">...</span></li>\n    <li :for="page in pages" :class="{active: currentPage == page}">\n      <a :attr="{href: getHref(page), title: \'第\'+page+\'页\'}"\n         :click="change($event, page)">{{page}}\n      </a>\n    </li>\n    <li><span class="omit" :if="showLastOmit">...</span></li>\n    <li :class="{active: currentPage === totalPages}">\n      <a :attr="{href: getHref(totalPages), title: \'第\'+totalPages+\'页\'}"\n         :click="change($event, totalPages)">{{totalPages}}\n      </a>\n    </li>\n    <li class="next" :class="{disabled: isDisabled(\'next\', totalPages)}">\n      <a :attr="{href: getHref(\'next\'), title: \'下一页\'}"\n         :click="change($event, \'next\')" :html="nextText">\n      </a>\n    </li>\n    <li class="last" :visible="firstText" :class="{disabled: isDisabled(\'last\', totalPages)}">\n      <a :attr="{href:getHref(\'last\'), title: \'末页\'}"\n         :click="change($event, \'last\')" :html="lastText">\n      </a>\n    </li>\n  </ul>\n</div>\n',data:function(){return{$disable:{},pages:[],showFirstOmit:!1,showLastOmit:!1}},props:{showPages:5,totalPages:1,currentPage:1,align:-1,firstText:"",prevText:"上一页",nextText:"下一页",lastText:""},methods:{onInit:function(e){var t=this.currentPage,n=a.exec(document.location.href);n&&n[1]&&(t=~~n[1])<=0&&(t=1),this.update(t)},isDisabled:function(e,t){return this.$disable[e]=this.currentPage===t},toPage:function(e){var t=this.currentPage,n=this.totalPages;switch(e){case"first":return 1;case"prev":return Math.max(t-1,1);case"next":return Math.min(t+1,n);case"last":return n;default:return e}},getPages:function(e){var t=[],n=this.totalPages,a=this.showPages,i=e,o=e;if(n<=a)for(var s=2;s<=n-1;s++)t.push(s);else for(e>1&&e<n&&t.push(e),a-=2;;){if(t.length>=a)break;if(i>2&&t.unshift(--i),t.length>=a)break;o<n-1&&t.push(++o)}return{currentPage:e,pages:t}},getHref:function(e){return"javascript:void(0)"},update:function(e){var t=this.getPages(e);this.currentPage=t.currentPage,this.pages=t.pages,this.showFirstOmit=t.pages[0]>2,this.showLastOmit=t.pages[t.pages.length-1]<this.totalPages-1},change:function(e,t){var n=this.toPage(t);if(this.$disable[t]||t===this.currentPage)return void e.preventDefault();this.update(n),this.onPageChange&&this.onPageChange(e,this.currentPage)}},watch:{totalPages:function(){this.update(this.currentPage)}},events:["onPageChange"]}},,,,,,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(28),o=a(i),s=n(27),l=a(s),r=n(29),c=a(r),d=n(10),u=a(d),h=n(40),p=a(h),f=n(41),v=a(f),m=n(38),g=a(m),b=n(39),y=a(b);t["default"]={name:"app",template:'\n<div>\n  <ms-header/>\n  <div class="container">\n    <div class="row">\n      <div class="span2">\n        <ms-nav />\n      </div>\n      <div class="span10">\n        <ms-router-view />\n      </div>\n    </div>\n    <ms-alert :widget="[{global: true}]" />\n  </div>\n  <ms-footer />\n</div>\n',data:function(){return{}},components:{Header:o["default"],Footer:l["default"],Nav:c["default"],Alert:u["default"]},directives:{Ref:p["default"],Tooltip:v["default"],Datepicker:g["default"],Placeholder:y["default"]}}},function(e,t,n){"use strict";function a(e,t){return function(){var n=this;s["default"].each(t.watch,function(e,t){n["$$unwatch"].push(n.$watch(e,t))});for(var a=this.$render.directives.concat(),i=void 0;a.length;)i=a.shift(),"ref"==i.type?i.node.ref=i.expr:"widget"==i.type&&(i.node.ref&&(s["default"].each(t.components,function(e,t){if(t.name==i.is)return n.$$ref[i.node.ref]=i.comVm,!1}),delete i.node.ref),s["default"].each(t.components,function(e,t){t.name==i.is&&t.events&&s["default"].each(t.events,function(e,t){i.comVm[t]=n[t]||s["default"].noop})}),i.innerRender&&(a=a.concat(i.innerRender.directives)));e&&e.call(this)}}function i(e,t){return function(){for(;this["$$unwatch"].length;)this["$$unwatch"].pop()();e&&e.call(this)}}t.__esModule=!0;var o=n(25),s=function(e){return e&&e.__esModule?e:{"default":e}}(o);s["default"].registerComponent=function(e){if(!s["default"].components[e.name]){var t=e.data||e.defaults;delete e.data,t=s["default"].isFunction(t)?t():t||{},s["default"].isPlainObject(t)||(t={},s["default"].warn(e.name+" >> data functions should return an object")),e.computed&&(t.$computed=s["default"].mix(t.$computed||{},e.computed),delete e.computed),e.props&&(s["default"].mix(t,e.props),delete e.props),e.methods&&(s["default"].mix(t,e.methods),delete e.methods),e.events&&e.events.length&&s["default"].each(e.events,function(e,n){t[n]=s["default"].noop}),e.filters&&(s["default"].each(e.filters,function(e,t){s["default"].filters[e]||(s["default"].filters[e]=t)}),delete e.filters),t["$$ref"]={},t["$$unwatch"]=[],t.onReady=a(t.onReady,e),t.onDispose=i(t.onDispose,e),s["default"].each(e.components,function(e,t){s["default"].registerComponent(t)}),e.directives&&s["default"].each(e.directives,function(e,t){s["default"].registerDirective(t)}),s["default"].store&&(t.$store=s["default"].store),t["$$component"]=e.name,e.defaults=t,s["default"].component(e.name,e)}},s["default"].registerDirective=function(e){s["default"].directive(e.name,e)},s["default"].bootstrap=function(e){e.el&&e.component||s["default"].error("avalon.bootstrap需要提供el和component参数");var t=e.el.replace(/^#/,""),n=e.component;s["default"].registerComponent(n);var a=s["default"].define({$id:"root",$store:s["default"].store||""}),i='<xmp :controller="'+a.$id+'" :widget="{is: \''+n.name+"', id: '"+n.name+"'}\"></xmp>",o=document.getElementById(t);s["default"].innerHTML(o,i)};var l=s["default"].define;s["default"].define=function(e){var t=e["$$component"],n=void 0;t&&(n=s["default"].components[t],n.beforeCreate&&n.beforeCreate.call(e));var a=l.call(s["default"],e);return n&&n.afterCreate&&n.afterCreate.call(a),a};var r=/^([.#])?([\w-]*)$/;s["default"].fn.mix({is:function(e){var t=!1,n=r.exec(e);if(n)switch(n[1]){case".":t=this.hasClass(n[2]);break;case"#":t=this.attr("id")==n[2];break;default:t=new RegExp(n[2],"i").test(this.element.tagName)}return t},parent:function(e){var t=this.element,n=void 0;if(t)for(;(t=t.parentNode)&&9!==t.nodeType;)if(1===t.nodeType&&(n=(0,s["default"])(t),!e||n.is(e)))return n;return(0,s["default"])(null)},sibling:function(e){var t=this.element,n=t,a=void 0;if(t)for(;n;n=n.nextSibling)if(1===n.nodeType&&n!==t&&(a=(0,s["default"])(n),!e||a.is(e)))return a;return(0,s["default"])(null)},one:function(e,t,n){var a=this;if(this[0]){var i=function n(i){t(i),s["default"].unbind(a[0],e,n)};return s["default"].bind(this[0],e,i,n)}}}),s["default"].support={transition:function(){var e=function(){var e=document.createElement("transition"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=void 0;for(n in t)if(void 0!==e.style[n])return t[n]}();return e&&{end:e}}()};var c={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};for(var d in c)!function(e,t){s["default"].filters[e]=function(e){return e.$return=e.which!==t,e}}(d,c[d]);t["default"]=s["default"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(59),o=a(i),s=n(50),l=a(s),r=n(51),c=a(r),d=n(49),u=a(d),h=n(53),p=a(h),f=n(46),v=a(f),m=n(54),g=a(m),b=n(48),y=a(b),$=n(55),k=a($),x=n(47),w=a(x),_=n(52),C=a(_),M=n(56),S=a(M),T=function(e){return n.e(1).then(function(){return e(n(99))}.bind(null,n))["catch"](n.oe)},P=function(e){return n.e(0).then(function(){return e(n(100))}.bind(null,n))["catch"](n.oe)},I=function(e){return n.e(0).then(function(){return e(n(101))}.bind(null,n))["catch"](n.oe)};t["default"]=new o["default"]({routes:[{path:["/","/#"],redirect:"//index"},{path:"/index",title:"首页",component:l["default"]},{path:"/list",title:"列表",component:c["default"]},{path:"/grid",title:"表格",component:u["default"]},{path:"/dropdown",title:"下拉菜单",component:T},{path:"/tabs",title:"标签卡",component:p["default"]},{path:"/accordion",title:"手风琴",component:v["default"]},{path:"/tooltip",title:"提示工具",component:g["default"]},{path:"/datepicker",title:"日期选择",component:y["default"]},{path:"/tree",title:"树组件",component:k["default"]},{path:"/carousel",title:"轮播",component:w["default"]},{path:"/router",title:"嵌套路由",component:C["default"],children:[{path:"foo",component:S["default"]},{path:"bar",component:P,children:[{path:"baz",component:I}]}]}]})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(26),l=a(s),r=n(64),c=a(r),d=n(67),u=a(d);t["default"]=new l["default"].Store((0,o["default"])({},c["default"],{modules:{video:u["default"]}}))},,,function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-footer",template:'\n<div class="footer text-center">\n  <p class="footer_cp">Copyright © 2017 版权所有<span style="margin-left: 15px;">不良信息举报电话：123456789</span></p>\n</div>\n'}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(36),l=a(s),r=n(37),c=a(r),d=void 0;t["default"]={name:"ms-header",template:'\n<div class="navbar">\n  <div class="navbar-inner">\n    <a class="brand" href="javascript:void(0)">\n      <img :if="logo" :attr="{src:logo}" />\n      <span :if="!logo" :text="title"></span>\n    </a>\n    <ul class="nav">\n      <ms-router-link :for="nav in navs" :widget="[{to: nav.path, text: nav.title, tag: \'li\'}]" />\n    </ul>\n    <form class="navbar-search pull-left">\n      <ms-typeahead :class="\'search-query\'" :placeholder="\'placeholder指令和Typeahead组件\'" :widget="[$typeahead]"/>\n    </form>\n    <ul class="nav pull-right">\n      <li class="dropdown" :class="{open:showUserbox}" :mouseenter="toggleUserbox(true)" :mouseleave="toggleUserbox(false)" :visible="isLogin">\n        <a href="javascript:void(0)" class="dropdown-toggle"><i class="fa fa-user"></i>{{user.nick}} <b class="caret"></b></a>\n        <ul class="dropdown-menu">\n          <li><a href="javascript:void(0)">Action</a></li>\n          <li><a href="javascript:void(0)">Another action</a></li>\n          <li><a href="javascript:void(0)">Something else here</a></li>\n          <li class="divider"></li>\n          <li><a href="javascript:void(0)">Separated link</a></li>\n        </ul>\n      </li>\n      <li class="divider-vertical"></li>\n      <li><button class="btn btn-primary" :text="loginText" :click="toggleLogin"></button></li>\n    </ul>\n  </div>\n  <ms-login :ref="login" />\n</div>\n',data:function(){return{title:"SPA",logo:"",showUserbox:!1,navs:[{title:"首页",path:"/index"}],$typeahead:{$source:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],itemLength:5}}},computed:(0,o["default"])({},avalon.store.mapState(["isLogin","user"]),{loginText:function(){return this.isLogin?"退出":"模态框-登录"}}),methods:{onReady:function(){avalon.store.dispatch("autoLogin")},toggleLogin:function(){this.$$ref.login.init(this.isLogin)},toggleUserbox:function(e){var t=this;clearTimeout(d),d=setTimeout(function(){return t.showUserbox=e},200)}},components:{Typeahead:l["default"],Login:c["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-nav",template:'\n<ul class="nav nav-pills nav-stacked">\n  <ms-router-link :for="nav in navs" :widget="[{to: nav.path, activeClass: \'active\', text: nav.title, tag: \'li\'}]" />\n</ul>\n',data:function(){return{navs:[{title:"列表",path:"/list"},{title:"表格",path:"/grid"},{title:"下拉菜单",path:"/dropdown"},{title:"标签卡",path:"/tabs"},{title:"手风琴",path:"/accordion"},{title:"提示工具",path:"/tooltip"},{title:"日期选择",path:"/datepicker"},{title:"树组件",path:"/tree"},{title:"轮播",path:"/carousel"},{title:"嵌套路由",path:"/router"}]}}}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",content:"",active:!1};t["default"]={name:"ms-accordion",template:'\n<div class="accordion">\n  <div class="accordion-group" :for="(i, item) in accordion">\n    <div class="accordion-heading">\n      <div class="accordion-toggle" :html="item.title" :click="toggle(item)"></div>\n    </div>\n    <div class="accordion-body collapse" :class="[item.active ? \'in\' : \'\']">\n      <div class="accordion-inner" :html="item.content"></div>\n    </div>\n  </div>\n</div>\n',data:function(){return{}},props:{accordion:[],multiple:!1},beforeCreate:function(){for(var e=0,t=0,n=this.accordion.length;t<n;t++)this.accordion[t]=avalon.mix({},a,this.accordion[t]),this.accordion[t].active&&e++;this.multiple=this.multiple||e>1},methods:{toggle:function(e){var t=this;e.active?(e.active=!1,this.onCollapse&&this.onCollapse(e.$model)):(this.multiple||avalon.each(this.accordion,function(e,n){n.active&&(n.active=!1,t.onCollapse&&t.onCollapse(n.$model))}),e.active=!0,this.onExpand&&this.onExpand(e.$model))}},events:["onExpand","onCollapse"]}},function(e,t,n){"use strict";t.__esModule=!0;var a={img:"",href:"javascript:void(0)",caption:"",active:!1},i={content:"",active:!1};t["default"]={name:"ms-carousel",template:'\n<div class="carousel">\n  \x3c!-- Carousel items --\x3e\n  <div class="carousel-inner">\n    <div class="item" \n         :for="(i, item) in items"\n         :attr="{id: item.$id}"\n         :class="{active: item.active}">\n      <a :attr="{href: item.href}"><img :attr="{src: item.img}"></a>\n      <div class="carousel-caption" :html="item.caption"></div>\n    </div>\n  </div>\n  \x3c!-- Carousel indicators --\x3e\n  <ol :class="[indicatorsClass]">\n    <li :for="(i, indicator) in indicators" \n        :html="indicator.content" \n        :click="to(i)"\n        :class="{active: indicator.active}">\n    </li>\n  </ol>\n  \x3c!-- Carousel nav --\x3e\n  <div :if="control">\n    <a class="carousel-control left" href="javascript:void(0)" :click="prev">&lsaquo;</a>\n    <a class="carousel-control right" href="javascript:void(0)" :click="next">&rsaquo;</a>\n  </div>\n</div>\n',data:function(){return{$timer:0,$index:0,$paused:!1,$sliding:!1}},props:{interval:5e3,indicators:[],indicatorsClass:"carousel-indicators",items:[],control:!0},beforeCreate:function(){for(var e=0,t=this.items.length;e<t;e++)this.items[e]=avalon.mix({},a,this.items[e]),this.indicators[e]=avalon.mix({},i,{content:this.indicators[e]||""});this.items[0].active=!0,this.indicators[0].active=!0},methods:{onReady:function(){var e=this;avalon.each(this.items,function(e,t){t.$element=document.getElementById(t.$id)}),avalon.bind(this.$element,"mouseenter",function(t){e.pause(t)}),avalon.bind(this.$element,"mouseleave",function(t){e.cycle(t)}),this.interval&&this.pause().cycle()},onDispose:function(){avalon.unbind(this.$element,"mouseenter"),avalon.unbind(this.$element,"mouseleave")},fixIndex:function(e){var t=this.items.length;return e%=t,e<0&&(e+=t),e},cycle:function(e){var t=this;return e||(this.$paused=!1),this.interval&&this.items.length>1&&(clearInterval(this.$timer),this.$paused||(this.$timer=setInterval(function(){return t.next()},this.interval))),this},pause:function(e){return e||(this.$paused=!0),clearInterval(this.$timer),this.$timer=null,this},to:function(e){if(e=this.fixIndex(e),this.$index==e)return this.pause().cycle();this.change(e>this.$index?"next":"prev",e)},next:function(){this.$sliding||this.change("next")},prev:function(){this.$sliding||this.change("prev")},change:function(e,t){var n=this;t="undefined"===avalon.type(t)?this.fixIndex(this.$index+("next"==e?1:-1)):t;var a=this.$timer,i="next"==e?"left":"right",o=this.items[this.$index],s=this.items[t];this.beforeChange(e,this.$index),this.$sliding=!0,a&&this.pause(),avalon.each(this.indicators,function(e,t){t.active=!1});var l=(avalon(this.$element),avalon(o.$element)),r=avalon(s.$element),c=function(){l.removeClass(i),r.removeClass([e,i].join(" ")),o.active=!1,s.active=!0,n.indicators[t].active=!0,n.$sliding=!1,n.$index=t,n.afterChange(e,n.$index),a&&n.cycle()};avalon.support.transition?(r.addClass(e),r[0].offsetWidth,l.addClass(i),r.addClass(i),r.one(avalon.support.transition.end,c)):c()}},events:["beforeChange","afterChange"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(12),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o={field:"",title:"",width:"",sort:!1,sortOrder:"",sortFn:avalon.filters.orderBy,formatter:avalon.noop},s={selected:!1};t["default"]={name:"ms-grid",template:'\n<div>\n  <div class="text-center" :if="title">\n    <h3 :html="title"></h3>\n  </div>\n  <table class="table" :class="style">\n    <thead>\n    <tr>\n      <th :for="col in columns" :css="{width:col.width}" :click="sort(col)">\n        <span class="pull-right" :visible="col.sortOrder">\n          <i :class="[\'icon-arrow-\' + col.sortOrder]"></i>\n        </span>\n        {{col.title}}\n      </th>\n    </tr>\n    </thead>\n      <tbody>\n        <tr :for="(rowIndex, item) in rows"\n            :class="{\'info\':item.selected}" :click="toggleSelect(item)">\n            <td :for="col in columns" :html="dealValue(item, col, rowIndex)"></td>\n        </tr>\n      </tbody>\n  </table>\n  <h2 class="muted text-center" :visible="!loading && rows.length === 0">暂无数据</h2>\n  <ms-pagination :ref="pagination" />\n</div>\n',data:function(){return{$lastSelect:null,$data:[],loading:!0,page:1,rows:[]}},props:{title:"",style:["table-striped","table-bordered","table-hover"],columns:[],multiple:!0,pageSize:5},beforeCreate:function(){for(var e,t=0,n=this.columns.length;t<n;t++){e=this.columns[t];for(var a in o)void 0===e[a]&&(e[a]=o[a]);e.formatter!==avalon.noop&&("datetime"===e.formatter?e.formatter=function(e){return avalon.filters.date(e,"yyyy-MM-dd HH:mm:ss")}:"date"===e.formatter&&(e.formatter=function(e){return avalon.filters.date(e,"yyyy-MM-dd")}))}},methods:{dealValue:function(e,t,n){var a=e[t.field];return t.formatter&&t.formatter!==avalon.noop?t.formatter(a,e,n):null===a||void 0===a?"":a},toggleSelect:function(e){this.multiple?(e.selected=!e.selected,e.selected&&e.onSelect&&this.onSelect(e.$model)):e.selected?(e.selected=!1,this.$lastSelect=null):(this.$lastSelect&&(this.$lastSelect.selected=!1),e.selected=!0,this.$lastSelect=e)},getSelected:function(){if(this.multiple){var e=[];return avalon.each(this.rows,function(t,n){n.selected&&e.push(n.$model)}),e}return this.$lastSelect?this.$lastSelect.$model:""},extendRowsData:function(e,t){for(var n,a=avalon.mix({},s),i=0;n=e[i];i++){"array"===avalon.type(n)&&function(){var a={};avalon.each(n,function(e,n){a[t[e]]=n}),e[i]=n=a}();for(var o in a)void 0===n[o]&&(n[o]=a[o])}return e},setData:function(e,t){var n=this.columns.map(function(e){return e.field});e=this.extendRowsData(e,n),t?Array.prototype.push.apply(this.$data,e):this.$data=e,this.loading=!1,this.update()},sort:function(e){if(e.sort){var t=void 0;avalon.each(this.columns,function(t,n){n!=e&&(n.sortOrder="")}),"down"===e.sortOrder?(e.sortOrder="up",t=1):(e.sortOrder="down",t=-1),e.sortFn&&e.sortFn!==avalon.noop&&(this.$data=e.sortFn(this.$data,e.field,t),1==this.page?this.update():this.page=1)}},update:function(){for(var e=this.$$ref.pagination,t=this.page,n=this.pageSize,a=this.$data.length,i=Math.min(a,n),o=(t-1)*n,s=[],l=o;l<a&&s.length!==i;l++)s.push(this.$data[l]);this.rows=s,e.currentPage=t,e.totalPages=Math.ceil(a/n)},onPageChange:function(e,t){this.page=t}},watch:{page:function(e){e&&this.update()},pageSize:function(){this.update()}},events:["onSelect"],components:{Pagination:i["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=avalon(document.createElement("div")).addClass("modal-backdrop fade");t["default"]={name:"ms-modal",template:'\n<div class="modal hide fade" :visible="visible">\n  <div class="modal-header">\n    <button type="button" class="close" :click="close">&times;</button>\n    <slot name="modal-title"></slot>\n  </div>\n  <div class="modal-body">\n    <slot name="modal-body"></slot>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-default" :click="close" :if="closeText">{{closeText}}</button>\n    <button type="button" class="btn btn-primary" :click="confirm">{{confirmText}}</button>\n  </div>\n</div>\n',data:function(){return{visible:!1,$backdrop:a}},props:{confirmText:"确定",closeText:"取消"},methods:{show:function(){this.visible||(this.visible=!0,this.$backdrop.addClass("in"),document.body.appendChild(this.$backdrop.element),avalon.msie<8&&document.body.appendChild(this.$element),avalon(this.$element).addClass("in"))},hide:function(){this.visible&&(document.body.removeChild(this.$backdrop.element),avalon(this.$element).removeClass("in"),this.$backdrop.removeClass("in"),this.visible=!1)},confirm:function(e){this.onConfirm&&!1===this.onConfirm(e)||this.hide()},close:function(e){this.onClose&&this.onClose(e),this.hide()}},events:["onConfirm","onClose"]}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",content:""};t["default"]={name:"ms-tabs",template:'\n<div class="tabs">\n  <div class="tab-header">\n    <ul class="nav nav-tabs">\n      <li :for="(i, tab) in tabs"\n          :class="[i == index ? active : \'\']"\n          :mouseenter="toggleHover(i, tab, true)"\n          :mouseleave="toggleHover(i, tab, false)"\n          :click="toggleClick(i, tab)"\n          :html="tab.title">\n      </li>\n    </ul>\n  </div>\n  <div class="tab-content">\n    <div class="tab-pane fade" \n         :for="(i, tab) in tabs"\n         :class="[i == index ? active + \' in\' : \'\']"\n         :html="tab.content"></div>\n  </div>\n</div>\n',data:function(){return{$timer:0}},props:{tabs:[],index:0,trigger:"click",delay:300,active:"active"},beforeCreate:function(){for(var e=0,t=this.tabs.length;e<t;e++)this.tabs[e]=avalon.mix({},a,this.tabs[e])},methods:{onReady:function(){},toggleHover:function(e,t,n){var a=this;this.index!=e&&"hover"==this.trigger&&(clearTimeout(this.$timer),n&&(this.$timer=setTimeout(function(){a._doSwitch(e,t)},this.delay)))},toggleClick:function(e,t){this.index!=e&&"click"==this.trigger&&this._doSwitch(e,t)},_doSwitch:function(e,t){var n=this.index;this.beforeSwitch&&!1===this.beforeSwitch(e,n)||(this.index=e,this.afterSwitch&&this.afterSwitch(e,n,t.$model))}},events:["beforeSwitch","afterSwitch"]}},function(e,t,n){"use strict";t.__esModule=!0;var a='\n<li MS_FOR class="tree-node">\n  <i :if="el.nodes && el.nodes.length" :click="toggleState(el)"\n     :class="el.state===\'collapse\' ? el.$collapseIcon : el.$expandIcon"></i>\n  <i class="tree-checkbox"\n     :if="el.$checkbox" :click="toggleCheck(el)"\n     :class="[el.checked ? el.$checkedIcon : el.$uncheckedIcon, \'tree-checkbox\' + el.checked]" ></i>\n  <span class="tree-node-content" :class="{\'tree-node-select\':el.selected}" :click="toggleSelect(el)" >\n    <i class="icon" :class="el.$nodeIcon"></i>\n    <span class="tree-text">{{el.text}}</span>\n  </span>\n  <ul :if="el.nodes && el.nodes.length" :visible="el.state===\'expand\'" :html="getNodesTpl(el)"></ul>\n</li>\n',i=a.replace("MS_FOR",':for="($index,el) in nodes"'),o=a.replace("MS_FOR",':for="($index,el) in el.nodes"'),s='\n<ul class="tree">'+i+"</ul>\n",l={nodes:[],$path:"",$nodeIcon:"",$expandIcon:"",$collapseIcon:"",$checkbox:!1,$checkedIcon:"",$uncheckedIcon:"",text:"",checked:0,selected:!1,state:""},r={initTreeNode:function(e,t,n){var a=this;return n=n||"",avalon.each(t,function(t,i){for(var o in l)void 0===i[o]&&(i[o]="nodes"!==o?e[o]||l[o]:l[o]);i.state||(i.state="collapse"),i.$path=n+t,i.nodes&&i.nodes.length&&(i.nodes=a.initTreeNode(e,i.nodes,i.$path))}),t},eachNode:function(e,t){var n=this;avalon.each(e,function(a,i){if(i){if(t&&!1===t(i,a,e))return!1;var o=i.nodes;if(o&&o.length>0&&!1===n.eachNode(o,t))return!1}})},getNode:function(e,t){t=t.split("");var n=void 0,a=void 0,i=void 0;for(a=0,i=t.length;a<i&&((n=e[t[a]])&&n.nodes&&n.nodes.length);a++)e=n.nodes;return a>=i-1?n:null},getParents:function(e,t){for(var n,a,i=[],o=t.$path.split(""),s=0,l=o.length;s<l-1;s++)n=o[s],a=e[n],i.push(a),e=a.nodes;return i}};t["default"]={name:"ms-tree",template:s,data:function(){return{$lastSelect:null}},props:{nodes:[],$nodeIcon:"",$checkbox:!1,$checkedIcon:"icon-check",$uncheckedIcon:"icon-unchecked",$expandIcon:"icon-minus",$collapseIcon:"icon-plus",$cascadeCheck:!0},beforeCreate:function(){r.initTreeNode(this,this.nodes)},methods:{onReady:function(){},getNodesTpl:function(e){return o},getTarget:function(e){var t={};return avalon.isPlainObject(e)?(t.$model=e,t.node=r.getNode(this.nodes,e.$path)):(t.node=e,t.$model=e.$model),t},toggleState:function(e,t){var n=this.getTarget(e),a=n.node,i=n.$model;if(t="undefined"!=avalon.type(t)?t:"collapse"===a.state){if(!1===this.onBeforeExpand(i))return;a.state="expand",this.onExpand(i)}else{if(!e||!1===this.onBeforeCollapse(i))return;a.state="collapse",this.onCollapse(i)}},toggleCheck:function(e,t){var n=this.getTarget(e),a=n.node,i=n.$model;if(void 0===t){var o=a.checked;t=a.checked=1===o?0:1}else a.checked=t;if(1===t&&this.onCheck(i),this.$cascadeCheck&&(a.nodes.length&&r.eachNode(a.nodes,function(e){e.checked=t}),a.$path.length>1)){var s=r.getParents(this.nodes,a);1===t?avalon.each(s,function(e,t){t.checked=2}):avalon.each(s.reverse(),function(e,t){var n=0;r.eachNode(t.nodes,function(e){if(1===e.checked)return n=2,!1}),t.checked=n})}},toggleSelect:function(e){var t=this.getTarget(e),n=t.node,a=t.$model;if(!1!==this.onBeforeSelect(a)){if(this.$lastSelect&&(this.$lastSelect.selected=!1),this.$lastSelect===n)return this.$lastSelect=null;n.selected=!0,this.$lastSelect=n,this.onSelect(a)}},expandNode:function(e){e&&this.toggleState(e,!0)},collapseNode:function(e){e&&this.toggleState(e,!1)},getNode:function(e){return r.getNode(this.nodes.toJSON(),e)},getParents:function(e){return r.getParents(this.nodes.toJSON(),e)},getSelected:function(){return this.$lastSelect&&this.$lastSelect.$model}},events:["onBeforeSelect","onSelect","onBeforeExpand","onExpand","onBeforeCollapse","onCollapse","onBeforeLoad","onCheck"]}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-typeahead",template:'\n<input type="text" autocomplete="off" data-provide="typeahead" :duplex="value" data-duplex-changed="search" :focus="toggleInput($event, true)" :blur="toggleInput($event, false)" />\n',data:function(){return{open:!1,value:"",items:[],$search:{debounce:null,blur:null,delay:300}}},props:{$source:[],itemLength:4,minLength:1},beforeCreate:function(){},methods:{onReady:function(){var e=avalon.scan('\n<ul class="typeahead dropdown-menu">\n  <li :for="item in items">\n    <a href="javascript:void(0)" :html="item | highlighter(value)" :click="select(item)"></a>\n  </li>\n</ul>\n',this),t=e.root.dom;this.$element.parentNode.appendChild(t)},toggleInput:function(e,t){var n=this;t||(clearTimeout(this.$search.blur),this.$search.blur=setTimeout(function(){n.open=!1},this.$search.delay))},search:function(){var e=this;clearTimeout(this.$search.debounce);var t=this.value;if(!t)return this.open=!1;this.$search.debounce=setTimeout(function(){if(!(t.length<e.minLength))if(avalon.isFunction(e.$source))e.$source(t,function(t){return e.searchCb(t)});else{var n=[];avalon.each(e.$source,function(e,a){~a.toLowerCase().indexOf(t.toLowerCase())&&n.push(a)}),e.searchCb(n)}},this.$search.delay)},searchCb:function(e){e.length?(e=this.sorter(e),this.items=e.slice(0,this.itemLength),this.open=!0):this.open=!1},select:function(e){this.value=e,this.onSelect&&this.onSelect(e),this.open=!1},sorter:function(e){for(var t=this.value,n=[],a=[],i=[],o=void 0;o=e.shift();)o.toLowerCase().indexOf(t.toLowerCase())?~o.indexOf(t)?a.push(o):i.push(o):n.push(o);return n.concat(a,i)}},watch:{open:function(e){avalon(this.$element.parentNode)[(e?"add":"remove")+"Class"]("open")}},filters:{highlighter:function(e,t){return t=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})}},events:["onSelect"]}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(33),l=a(s),r={validateInBlur:!1,onManual:avalon.noop,onSuccess:function(e){e.forEach(function(e){var t=avalon(e.element),n=t.sibling(".help-inline");avalon.innerHTML(n.element,""),t.parent(".control-group").removeClass("error")})},onError:function(e){e.forEach(function(e){var t=avalon(e.element),n=t.sibling(".help-inline");avalon.innerHTML(n.element,e.getMessage()),t.parent(".control-group").addClass("error")})},onValidateAll:function(e){var t=this._ms_validate_.vm;e.length?this._ms_validate_.onError(e):(avalon.log("全部通过"),t.submit())}};t["default"]={name:"ms-login",template:'\n<ms-modal id="loginModal" :ref="modal" :validate="validate">\n  <div slot="modal-title">登录框</div>\n  <form class="form-horizontal" slot="modal-body">\n    <div class="control-group">\n      <label class="control-label" for="username">用户名</label>\n      <div class="controls">\n        <input type="text" class="form-control" id="username" placeholder="用户名" :duplex="username" :rules="{required:true, maxlength:24}" data-required-message="用户名必须填写" data-maxlength-message="用户名超过24字">\n        <span class="help-inline"></span>\n      </div>\n    </div>\n    <div class="control-group">\n      <label class="control-label" for="password">密码</label>\n      <div class="controls">\n        <input type="password" class="form-control" id="password" placeholder="密码" :duplex="password" :rules="{required:true}" data-required-message="密码必须填写">\n        <span class="help-inline"></span>\n      </div>\n    </div>\n    <div class="control-group">\n      <div class="controls">\n        <label class="checkbox">\n          <input type="checkbox" :duplex-checked="autoLogin" :rules="{norequired:true}"> 自动登录\n        </label>\n      </div>\n    </div>\n  </form>\n  <div slot="modal-footer" class="text-center">\n    <button type="submit" class="btn btn-default" :click="onSubmit">登录</button>\n  </div>\n</ms-modal>\n',data:function(){return{username:"",password:"",autoLogin:!1,validate:r}},methods:(0,o["default"])({},avalon.store.mapActions(["login","logout"]),{init:function(e){e?this.logout():this.$$ref.modal.show()},submit:function(){this.login({userid:"123456",usernick:this.username,autoLogin:this.autoLogin}),this.$$ref.modal.hide(),this.reset()},reset:function(){this.username="",this.password="",this.autoLogin=!1},onConfirm:function(){return this.$element._ms_validate_.vm=this,this.validate.onManual(),!1},onClose:function(){}}),components:{Modal:l["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(11),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o={_queue:{},length:0,add:function(e){this._queue[e.uuid]=e,this.length++},remove:function(e){delete this._queue[e.uuid],this.length--},clickHandler:function(e){avalon.each(o._queue,function(t,n){var a=n.datepickerVM,i=n.$datepicker;if(a&&i&&""!=i.style.display){avalon(e.target).parent(".datepicker").element||(a.visibleYearMonth=!1,i.style.display="")}})},resizeHandler:function(e){avalon.each(o._queue,function(e,t){t.updatePosition(t.$input,t.$datepicker,t.value.placement)})}},s={placement:"bottom",format:"yyyy-MM-dd HH:mm:ss",$date:"",$directive:!0,$timesActive:!0},l=!1;t["default"]={name:"datepicker",priority:5,beforeInit:function(){l||(avalon.registerComponent(i["default"]),l=!0),this.$input="",this.$datepicker=""},init:function(){var e=this.$input=this.node.dom;if("INPUT"!=e.nodeName&&"text"!=e.type)return avalon.error("指令元素必须是type为text的input");this._onEventHandler=this.onEventHandler.bind(this),avalon.bind(e,"click",this._onEventHandler),o.length||(avalon.bind(document,"click",o.clickHandler),avalon.bind(window,"resize",o.resizeHandler)),o.add(this)},update:function(){this.$input.value=this.value.$date||""},beforeDispose:function(){var e=this.node.dom;avalon.unbind(e,"click",this._onEventHandler),o.remove(this),o.length||(avalon.unbind(document,"click",o.clickHandler),avalon.unbind(window,"resize",o.resizeHandler)),this.datepickerVM&&this.fireHook(this.datepickerVM,this.node,"Dispose")},fireHook:function(e,t,n){var a="on"+n;e[a]&&e[a].call(e,{type:n.toLowerCase(),target:t.dom,vmodel:e})},getPosition:function(e){return avalon.mix({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},avalon(e).offset())},updatePosition:function(e,t,n){var a=this.getPosition(e),i=t.offsetHeight,o=void 0;switch(n){case"top":o={top:a.top-i-5,left:a.left};break;default:o={top:a.top+a.height,left:a.left}}avalon(t).css(o)},onEventHandler:function(e){var t=this.datepickerVM;if(t)this.$input.value||t.setValue(t.$date=new Date),this.$input.lastValue=this.$input.value,this.$datepicker.style.display="block";else{var n=this.value,a=avalon.mix({},i["default"].defaults,s,{$id:avalon.makeHashCode("datepicker"),onChoose:this.onChoose.bind(this),onClear:this.onClear.bind(this),onCancel:this.onCancel.bind(this)},n);t=this.datepickerVM=avalon.define(a),this.fireHook(t,this.node,"Init"),this.$input.lastValue=a.$date;var o=t.$render=avalon.scan(i["default"].template,t);this.$datepicker=o.root.dom,(this.$input.parentNode||document.body).appendChild(this.$datepicker),this.fireHook(t,this.node,"Ready"),this.$datepicker.style.display="block",this.updatePosition(this.$input,this.$datepicker,a.placement)}e.stopPropagation()},onChoose:function(e,t){this.$input.value=e},onClear:function(){this.$input.value=""},onCancel:function(){this.datepickerVM.visibleYearMonth=!1,this.$datepicker.style.display="",this.$input.value=this.$input.lastValue,this.datepickerVM.setValue(this.datepickerVM.$date=new Date(this.$input.lastValue.replace(/-/g,"/")))}}},function(e,t,n){"use strict";t.__esModule=!0;var a="placeholder"in document.createElement("input");t["default"]={name:"placeholder",priority:5,init:function(){var e=this,t=this.node.dom,n=t.nodeName;if("INPUT"!=n&&"TEXTAREA"!=n)return avalon.error("placeholder指令只适用于input或textarea");var i=this.node.props;delete i["ms-placeholder"],delete i[":placeholder"];var o=this.getValue()||this.expr;t.setAttribute("placeholder",o),a||setTimeout(function(){var a=t.parentNode,i=avalon.lexer('\n<span class="wrap-placeholder" style="position:absolute; color:#ACA899; display:inline-block; overflow:hidden;">\n</span>\n'),s=avalon.vdom(i,"toDOM");a.insertBefore(s,t),s=a.firstChild;var l=avalon(t),r=avalon(s),c=t.offsetWidth,d=t.offsetHeight,u=parseInt(l.css("marginLeft")),h=parseInt(l.css("marginTop")),p=parseInt(l.css("paddingLeft")),f={fontFamily:l.css("fontFamily"),fontSize:l.css("fontSize"),marginLeft:u?u+3:3,marginTop:h||1,paddingLeft:p,width:c-u-p,height:d,lineHeight:"TEXTAREA"==n?l.css("lineWeight"):d+"px"};r.css(f),avalon.innerHTML(s,o),e.target=t,e.wrapper=s,s.onclick=function(){t.focus()},e._changeHandler=e.changeHandler.bind(e),avalon.bind(t,"input",e._changeHandler),9==avalon.msie&&(e._focusHandler=e.focusHandler.bind(e),avalon.bind(t,"focus",e._focusHandler),avalon.bind(t,"blur",e._focusHandler))},100)},changeHandler:function(){avalon(this.wrapper).css("display",""!=this.target.value?"none":"inline-block")},focusHandler:function(e){"focus"===e.type?document.addEventListener("selectionchange",this._changeHandler,!1):document.removeEventListener("selectionchange",this._changeHandler,!1)},beforeDispose:function(){var e=this.node.dom;avalon.unbind(e,"input",this._changeHandler),this.wrapper&&(this.wrapper.onclick=null),9==avalon.msie&&(avalon.unbind(e,"focus",this._onFocusChange),avalon.unbind(e,"blur",this._onFocusChange),delete this._onFocusChange,document.removeEventListener("selectionchange",this._changeHandler))}}},function(e,t,n){"use strict";t.__esModule=!0,t["default"]={name:"ref",priority:3}},function(e,t,n){"use strict";t.__esModule=!0;var a={title:"",trigger:"hover",placement:"right",content:""},i={_queue:{},length:0,add:function(e){this._queue[e.uuid]=e,this.length++},remove:function(e){delete this._queue[e.uuid],this.length--},resizeHandler:function(e){avalon.each(i._queue,function(e,t){var n=t.node.dom;n.tooltip&&t.updatePosition(n,n.tooltip,t.value.placement)})}};t["default"]={name:"tooltip",priority:5,init:function(){var e=this,t=this.node.dom,n=avalon(t),o=avalon.mix({},a,this.getValue());this.eventType="focus"==o.trigger?"focus blur":"hover"==o.trigger?"mouseenter mouseleave":"click",this._onEventHandler=this.onEventHandler.bind(this),avalon.each(this.eventType.split(" "),function(t,a){n.bind(a,e._onEventHandler)}),i.length||avalon.bind(window,"resize",i.resizeHandler),i.add(this)},beforeDispose:function(){var e=this,t=this.node.dom,n=avalon(t);avalon.each(this.eventType.split(" "),function(t,a){n.unbind(a,e._onEventHandler)}),i.remove(this),i.length||avalon.unbind(window,"resize",i.resizeHandler)},getPosition:function(e){return avalon.mix({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},avalon(e).offset())},updatePosition:function(e,t,n){var a=avalon(t).removeClass("fade in top bottom left right").addClass(n).css("display","block"),i=this.getPosition(e),o=t.offsetWidth,s=t.offsetHeight,l=void 0;switch(n){case"bottom":l={top:i.top+i.height,left:i.left+i.width/2-o/2};break;case"top":l={top:i.top-s,left:i.left+i.width/2-o/2};break;case"left":l={top:i.top+i.height/2-s/2,left:i.left-o};break;case"right":l={top:i.top+i.height/2-s/2,left:i.left+i.width}}a.css(l).addClass("fade in")},onEventHandler:function(e){var t=e.currentTarget,n=t.parentNode,a=e.type;switch("click"==a&&(a=this.show?"click0":"click1"),a){case"mouseenter":case"focus":case"click1":var i=this.value,o=i.title,s=i.content,l=i.placement,r=s?'\n<div class="popover">\n  <div class="arrow"></div>\n  <h3 class="popover-title"></h3>\n  <div class="popover-content"></div>\n</div>\n':'\n<div class="tooltip">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"></div>\n</div>\n',c=void 0;if(t.tooltip)c=t.tooltip,n.appendChild(c);else{var d=avalon.lexer(r);n.appendChild(avalon.vdom(d,"toDOM")),c=n.lastChild,t.tooltip=c}s?(avalon.innerHTML(c.childNodes[1],o),avalon.innerHTML(c.lastChild,s)):avalon.innerHTML(c.lastChild,o),this.updatePosition(t,c,l),this.show=!0;break;case"mouseleave":case"blur":case"click0":avalon.contains(n,t.tooltip)&&n.removeChild(t.tooltip),this.show=!1}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=n(22),o=a(i),s=n(24),l=(a(s),n(23)),r=(a(l),n(21)),c=a(r);if(o["default"].config({debug:!0,local:!0}),o["default"].msie&&o["default"].msie<10)for(var d,u=document.body.childNodes,h=u.length-1;h>=0;h--)d=u[h],"SCRIPT"===d.nodeName&&document.body.removeChild(d);o["default"].bootstrap({el:"#app",component:c["default"]})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(44),l=a(s),r=n(45),c=a(r);t["default"]=(0,o["default"])({},l["default"],c["default"],{get:function(e,t){return e&&this[e]?this[e](t):t.reject({status:404,data:{}})}})},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o=n(1),s={uid:"123456",nick:"厉害了"};t["default"]=(0,i["default"])({},o.USER.DATA,function(e){setTimeout(function(){return e.resolve({status:200,data:s})},100)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(3),o=a(i),s=n(1),l=n(20),r=a(l),c=r["default"].mock({"list|10-30":[{"id|+1":1,title:"@ctitle",poster:'@image("138x78")',create_time:'@datetime("yyyy-MM-dd HH:mm")',"status|1-3":3,"plays|100-10000":100,"comments|0-100":0,checked:!1}]}).list;t["default"]=(0,o["default"])({},s.VIDEO.LIST,function(e){setTimeout(function(){return e.resolve({status:200,data:c})},100)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(30),l=a(s),r=['<a href="javascript:void(0)">Collapsible Group Item #1</a>','<a href="javascript:void(0)">Collapsible Group Item #2</a>','<a href="javascript:void(0)">Collapsible Group Item #3</a>'],c=["<p>Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone. Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</p>\n  ","<p>Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.</p>\n  ","<p>Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.  Pitchfork sustainable tofu synth chambray yr.</p>\n  "],d=[];avalon.each(r,function(e){d.push({title:r[e],content:c[e]})}),d[0].active=!0,t["default"]={name:"ms-accordion-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <ms-accordion :widget="[accordion1]" :ref="accordion1"/>\n    <ms-accordion :widget="[accordion2]" />\n  </div>\n</ms-panel>\n',data:function(){return{accordion1:{accordion:d},accordion2:{accordion:d,multiple:!0}}},methods:{onExpand:function(e){},onCollapse:function(e){}},components:{Panel:o["default"],Accordion:l["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(31),l=a(s);t["default"]={name:"ms-carousel-panel",template:'\n<ms-panel :ref="panel">\n  <div slot="panel-bar">\n    <ms-carousel :widget="[carousel]" :ref="carousel" />\n\n    <button class="btn" :click="prev">向前</button>\n    <button class="btn" :click="next">向后</button>\n    <div class="input-prepend input-append" style="margin-top: 10px; display: inline;">\n      <span class="add-on">第</span>\n      <input class="span1" type="text" :duplex="index">\n      <span class="add-on">个</span>\n      <button class="btn" :click="to">跳转</button>\n    </div>\n  </div>\n</ms-panel>\n',data:function(){return{carousel:{items:[{img:"http://v2.bootcss.com/assets/img/bootstrap-mdo-sfmoma-01.jpg",caption:"\n            <h4>First Thumbnail label</h4>\n            <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. </p>\n          ",href:"#1"},{img:"http://v2.bootcss.com/assets/img/bootstrap-mdo-sfmoma-02.jpg",caption:"\n            <h4>Second Thumbnail label</h4>\n            <p>Nullam id dolor id nibh ultricies vehicula ut id elit.</p>\n          ",href:"#2"},{img:"http://v2.bootcss.com/assets/img/bootstrap-mdo-sfmoma-03.jpg",caption:"\n            <h4>Third Thumbnail label</h4>\n            <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>\n          ",href:"#3"}],interval:2e3},index:1}},methods:{prev:function(){this.$$ref.carousel.prev()},next:function(){this.$$ref.carousel.next()},to:function(){var e=~~this.index;this.$$ref.carousel.to(e)}},components:{Panel:o["default"],Carousel:l["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(11),l=a(s);t["default"]={name:"ms-datepicker-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <h1>指令：</h1>\n    <div class="input-append">\n      <input type="text" :datepicker="{placement: \'bottom\'}">\n      <span class="add-on"><i class="icon-calendar"></i></span>\n    </div>\n    <div class="input-append">\n      <input type="text" :datepicker="{placement: \'top\'}" />\n      <span class="add-on"><i class="icon-calendar"></i></span>\n    </div>\n    <input type="text" :datepicker="$datepicker3">\n    <h1>组件:</h1>\n    <ms-datepicker :widget="[$datepicker4]"/>\n    <p>{{date}}</p>\n  </div>\n</ms-panel>\n',data:function(){return{date:"",$datepicker3:{placement:"bottom",format:"yyyy/MM/dd",$date:"2017/07/28",$timesActive:!1},$datepicker4:{$date:"2017/06/28",format:"yyyy-MM-dd"}}},methods:{onChoose:function(e,t){this.date=e}},components:{Panel:o["default"],Datepicker:l["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(32),l=a(s),r=n(10),c=a(r),d=n(20),u=a(d);t["default"]={name:"ms-grid-panel",template:'\n<ms-panel>\n  <div slot="panel-bar">\n    <ms-grid :widget="[$grid1]" :ref="grid1" />\n    <button class="btn" :click="getSelected(1)">获取选中项全局输出</button>\n    <button class="btn" :click="addData()">追加数据</button>\n    <ms-grid :widget="[$grid2]" :ref="grid2" />\n    <button class="btn" :click="getSelected(2)">获取选中项当前输出</button>\n    <ms-alert :ref="msg" />\n  </div>\n</ms-panel>\n',data:function(){return{$grid1:{title:"表格1",columns:[{field:"a1",title:"a1",sort:!0},{field:"a2",title:"a2"},{field:"a3",title:"a3"}],multiple:!1},$grid2:{title:"表格2",columns:[{field:"a1",title:"a1"},{field:"a2",title:"a2",sort:!0},{field:"a3",title:"a3",sort:!0}],pageSize:8},getSelected:function(e){1==e?avalon.alert({text:avalon._quote(this.$$ref.grid1.getSelected())}):2==e&&this.$$ref.msg.alert({text:avalon._quote(this.$$ref.grid2.getSelected()),autoClose:!1})},addData:function(){this.$$ref.grid1.setData(u["default"].mock({"list|10":[{"id|+1":11,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list,!0)}}},methods:{onReady:function(){this.$$ref.grid1.setData(u["default"].mock({"list|10":[{"id|+1":1,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list),this.$$ref.grid2.setData(u["default"].mock({"list|10-30":[{"id|+1":1,a1:"@ctitle",a2:'@datetime("yyyy-MM-dd HH:mm")',"a3|100-10000":100}]}).list)}},components:{Panel:o["default"],Grid:l["default"],Alert:c["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-index-panel",template:'\n<ms-panel :widget="[$panel]" :ref="panel">\n  <div slot="panel-bar">\n    <p>该项目不直接修改avalon2源码，只是在其基础上扩展。<a href="https://github.com/hmhao/avalon2-webpack2-spa">项目Github地址</a></p>\n    <h3>说明</h3>\n    <ul>\n      <li>整合avalon2和webpack2，支持webpack热更新</li>\n      <li>兼容性支持IE8以下，IE8以下禁用热更新，需要手动刷新</li>\n      <li>[采用ES6、类vue的单文件组件书写](#component)\n      （avalon组件只使用defaults来定义组件VM的属性与方法，在书写时非常混乱）</li>\n      <li>加入官网路由并改造，实现嵌套路由(使用<a href="https://github.com/hmhao/avalon2-webpack2-spa/blob/master/src/router/base/components/link.js" target="_blank">ms-router-link</a>和<a href="https://github.com/hmhao/avalon2-webpack2-spa/blob/master/src/router/base/components/view.js" target="_blank">ms-router-view</a>)，支持路由懒加载(<a href="https://github.com/hmhao/avalon2-webpack2-spa/blob/master/src/router/index.js" target="_blank">参考</a>)</li>\n      <li>加入cookie_js、<a href="https://github.com/hmhao/avalonx">avalonx(状态管理)</a></li>\n    </ul>\n    <h3>组件书写</h3>\n    <ul>\n      <li>data：组件内部属性</li>\n      <li>props：来自父组件的数据</li>\n      <li>computed：组件计算属性</li>\n      <li>methods：组件方法及钩子函数</li>\n      <li>watch：组件内部观察属性变化</li>\n      <li>filters：组件自定义过滤器</li>\n      <li>events：组件对外分发事件的声明</li>\n      <li>components：组件依赖的子组件</li>\n      <li>beforeCreate：组件创建vm前会调用，可用于vm数据校验或补充</li>\n      <li>afterCreate：组件创建vm后会调用</li>\n    </ul>\n  </div>\n</ms-panel>\n',data:function(){return{$panel:{noFooter:!0}}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(2),o=a(i),s=n(0),l=a(s),r=n(12),c=a(r),d={1:"上传",2:"审核",3:"发行"};t["default"]={name:"ms-list",template:'\n<ms-panel :widget="{title: \'列表\'}">\n  <div slot="panel-bar">\n    <div class="row">\n      <div class="span3">\n        <div class="input-prepend">\n          <span class="add-on">排序</span>\n          <select class="span2" :duplex="video.sort">\n            <option :for="sort in video.$sort" :attr="{value: sort.key}">{{sort.text}}</option>\n          </select>\n        </div>\n      </div>\n      <div class="span3">\n        <div class="input-prepend">\n          <span class="add-on">过滤</span>\n          <select class="span2" :duplex-number="video.filter">\n            <option :for="filter in video.$filter" :attr="{value: filter.value}">{{filter.text}}</option>\n          </select>\n        </div>\n      </div>\n      <div class="btn-group pull-right">\n        \n      </div>\n    </div>\n  </div>\n  <table class="table table-bordered" slot="panel-table">\n    <thead>\n      <tr class="text-center">\n        <td><input type="checkbox" :attr="{checked: allChecked}" :click="checkAll"/></td>\n        <td>列表</td>\n        <td>状态</td>\n        <td>热度</td>\n        <td>操作</td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr :for="(i, v) in list">\n        <td>\n          <input type="checkbox" :attr="{checked: v.checked}" :click="checkOne($event, v)"/>\n        </td>\n        <td style="width: 60%">\n          <div class="media">\n            <a class="pull-left" href="javascript:void(0)">\n              <img class="media-object" style="width: 138px; height: 78px;" :attr="{src: v.poster}">\n            </a>\n            <div class="media-body text-left">\n              <dl>\n                <dt :attr="{title: v.title}">{{v.title}}</dt>\n                <dd>{{v.create_time}}</dd>\n              </dl>\n            </div>\n          </div>\n        </td>\n        <td>\n          <p>{{v.status | statusMsg}}</p>\n        </td>\n        <td>\n          <p><i class="glyphicon glyphicon-expand"></i>{{v.plays}}</p>\n          <p><i class="glyphicon glyphicon-comment"></i>{{v.comments}}</p>\n        </td>\n        <td>\n          <p><a href="javascript:void(0)" :click="edit">编辑</a></p>\n          <p><a href="javascript:void(0)" :click="remove">删除</a></p>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <ms-pagination :ref="pagination" slot="panel-footer"></ms-pagination>\n</ms-panel>\n',data:function(){return{allChecked:!1,list:[]}},computed:(0,o["default"])({},avalon.store.mapState(["video"])),methods:(0,o["default"])({},avalon.store.mapActions(["getVideoList"]),{onReady:function(){var e=this;this.getVideoList().done(function(t){t&&200==t.status&&(e.video.page=1)})},onDispose:function(){this.video.page=-1},checkAll:function(e){var t=this.allChecked=!this.allChecked;this.list.forEach(function(e){e.checked=t})},checkOne:function(e,t){var n=t.checked=!t.checked;this.allChecked=!1!==n&&this.list.every(function(e){return e.checked})},update:function(){var e=this.video,t=e.page,n=e.sort,a=e.filter,i=[];avalon.each(e.$list,function(e,t){a&&t.status!=a||i.push(t)}),i.sort(function(e,t){return"new"==n?new Date(e.create_time)<new Date(t.create_time)?1:-1:"hot"==n?parseInt(e.plays)<parseInt(t.plays)?1:-1:e.id<t.id?1:-1});for(var o=i.length,s=Math.min(o,e.$perNum),l=(t-1)*e.$perNum,r=[],c=l;c<o&&r.length!==s;c++)r.push(i[c]);this.list=r;var d=this.$$ref.pagination;d.currentPage=t,d.totalPages=Math.ceil(o/e.$perNum)},edit:function(){},remove:function(){},onPageChange:function(e,t){this.video.page=t}}),watch:{"video.page":function(e){e&&this.update()},"video.sort":function(e){this.video.page=1,this.update()},"video.filter":function(e){this.video.page=1,this.update()}},filters:{statusMsg:function(e){return d[e]||"未知错误"}},components:{Panel:l["default"],Pagination:c["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-router-panel",template:"\n<ms-panel>\n  <div slot=\"panel-bar\">\n    <h1>Basic</h1>\n    <ul>\n      <li><ms-router-link :widget=\"[{to: '/router', text: '/'}]\"/></li>\n      <li><ms-router-link :widget=\"[{to: '/router/foo', text: '/foo'}]\"/></li>\n      <li><ms-router-link :widget=\"[{to: '/router/bar', text: '/bar'}]\"/></li>\n      <li><ms-router-link :widget=\"[{to: '/router/bar/baz', text: '/bar/baz'}]\"/></li>\n    </ul>\n    <ms-router-view />\n  </div>\n</ms-panel>\n",data:function(){return{}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(34),l=a(s),r=['<a href="javascript:void(0)">Tab1</a>','<a href="javascript:void(0)">Tab2</a>','<a href="javascript:void(0)">Tab3</a>'],c=["<p>Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone. Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</p>\n  ","<p>Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.</p>\n  ","<p>Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.  Pitchfork sustainable tofu synth chambray yr.</p>\n  "],d=[];avalon.each(r,function(e,t){d.push({title:r[e],content:c[e]})}),t["default"]={name:"ms-tabs-panel",template:'\n<ms-panel :ref="panel">\n  <div slot="panel-bar">\n    <ms-tabs :widget="[tabs1]" :ref="tabs1" />\n    <ms-tabs :widget="[tabs2]" :ref="tabs2" />\n  </div>\n</ms-panel>\n',data:function(){return{tabs1:{tabs:d,index:0,trigger:"hover",delay:500},tabs2:{tabs:d,index:0,trigger:"click"}}},methods:{beforeSwitch:function(e,t){},afterSwitch:function(e,t){}},components:{Panel:o["default"],Tabs:l["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(0),i=function(e){return e&&e.__esModule?e:{"default":e}}(a);t["default"]={name:"ms-tooltip-panel",template:'\n<ms-panel :widget="{noFooter: true}">\n  <div slot="panel-bar">\n    <a class="btn" :for="type in tooltip" :tooltip="{title: \'tooltip \' + type, trigger: \'hover\', placement: type}">tooltip {{type}}</a>\n    <br>\n    <a class="btn" :for="type in popover" :tooltip="{title: \'popover \' + type, trigger: \'click\', placement: type, content: \'content 123456789\'}">popover {{type}}</a>\n  </div>\n</ms-panel>\n',data:function(){return{tooltip:["left","top","bottom","right"],popover:["left","top","bottom","right"]}},components:{Panel:i["default"]}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(0),o=a(i),s=n(35),l=a(s);t["default"]={name:"ms-tree-panel",template:'\n<ms-panel :ref="panel">\n  <div slot="panel-bar">\n    <ms-tree :widget="[tree]" :ref="tree" />\n\n    <button class="btn" :click="getSelected">获取选中项</button>\n    <button class="btn" :click="getParents">获取选中项的所有父节点</button>\n    <button class="btn" :click="expand">展开选中项的子项</button>\n    <button class="btn" :click="collapse">收起选中项的子项</button>\n    <br>\n    <div class="input-prepend input-append">\n      <span class="add-on">路径</span>\n      <input class="span2" type="text" :duplex="path">\n      <button class="btn" :click="getNode">获取指定项</button>\n      <button class="btn" :click="expandTo">展开到指定项并选中</button>\n    </div>\n  </div>\n</ms-panel>\n',data:function(){return{tree:{$checkbox:!0,$nodeIcon:"icon-bookmark",$checkedIcon:"icon-ok-sign",$uncheckedIcon:"icon-ok-circle",$expandIcon:"icon-chevron-down",$collapseIcon:"icon-chevron-right",nodes:[{text:"node1"},{text:"node2",state:"expand",nodes:[{text:"node21",nodes:[{text:"node211"},{text:"node212"}]},{text:"node22"}]},{text:"node3"}]},path:"100"}},methods:{getSelected:function(){avalon.log(this.$$ref.tree.getSelected())},getParents:function(){var e=this.$$ref.tree,t=e.getSelected();t&&avalon.log(e.getParents(t))},expand:function(){var e=this.$$ref.tree,t=e.getSelected();e.expandNode(t)},collapse:function(){var e=this.$$ref.tree,t=e.getSelected();e.collapseNode(t)},getNode:function(){avalon.log(this.$$ref.tree.getNode(this.path))},expandTo:function(){var e=this.$$ref.tree,t=e.getNode(this.path),n=e.getParents(t);avalon.each(n,function(t,n){e.expandNode(n)}),e.toggleSelect(t)}},components:{Panel:o["default"],Tree:l["default"]}}},function(e,t,n){"use strict";t.__esModule=!0;t["default"]={name:"ms-router-foo",template:"\n<div>\n  <h2>This is Foo!</h2>\n</div>\n"}},function(e,t,n){"use strict";t.__esModule=!0;var a=function(e,t){return e?"#!"+e:"javascript:void(0)"},i=function(e,t){return new RegExp("^"+e,"g").test(t.path)},o={name:"ms-router-link",template:"\x3c!-- router-link --\x3e",data:function(){return{active:!1,path:""}},props:{to:"",text:"",activeClass:"active",tag:"a"},beforeCreate:function(){this.path=a(this.to,avalon.router),"a"===this.tag?o.template='<a :attr="{href: path}" :class="{'+this.activeClass+': active}" :html="text"></a>':o.template="<"+this.tag+' :class="{'+this.activeClass+': active}"><a :attr="{href: path}" :html="text"></a></'+this.tag+">"},methods:{onReady:function(){avalon.router.subscribe(this.update)},onDispose:function(){avalon.router.unsubscribe(this.update)},update:function(e){this.active=i(this.to,e)}}};t["default"]=o},function(e,t,n){"use strict";t.__esModule=!0,t["default"]={name:"ms-router-view",template:"\x3c!-- router-view --\x3e",data:function(){return{$container:"",$innerRender:"",component:""}},methods:{onReady:function(){this.$container=this.$element.parentNode,avalon.router.subscribe(this.update)},onDispose:function(){this.$innerRender&&(this.$innerRender.dispose(),this.$innerRender=""),this.$container="",avalon.router.unsubscribe(this.update)},update:function(e){var t=e.matched[e.depth++];this.component=t?"<xmp :widget=\"{is: '"+t+"', id: '"+t+"'}\"></xmp>":""}},watch:{component:function(e){this.$innerRender&&(this.$container.replaceChild(this.$element,this.$innerRender.root.dom),this.$innerRender.dispose(),this.$innerRender=""),e&&(this.$innerRender=avalon.scan(e),this.$container.replaceChild(this.$innerRender.root.dom,this.$element))}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(!(this instanceof i))return new i(e);var t=avalon.mix(avalon.router,i.prototype);return t.routes={},t.options=e,t.watchers=[],t.beforeHooks=[],t.resolveHooks=[],t.afterHooks=[],t.route=null,avalon.ready(function(){(e.routes||[]).forEach(function(e){return t.register(e)}),avalon.history.start({hashPrefix:""})}),t}function o(e,t,n){if(e.length){var a=[];e.forEach(function(e,n){a.push(new Promise(e).then(function(a){var i=a["default"];avalon.registerComponent(i),t[n]=i.name,e.loadedName=i.name}))}),Promise.all(a).then(n)}else n()}t.__esModule=!0;var s=n(61),l=(a(s),n(58)),r=a(l),c=n(57),d=a(c);avalon.registerComponent(r["default"]),avalon.registerComponent(d["default"]),i.prototype.subscribe=function(e){this.watchers.push(e),this.route&&e(this.route)},i.prototype.unsubscribe=function(e){for(var t=this.watchers,n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},i.prototype.dispatch=function(e){e=e||this.route,this.watchers.forEach(function(t){return t(e)})},i.prototype.register=function(e){var t=this;if(e.component&&avalon.registerComponent(e.component),e.redirect)avalon.router.when(e.path,e.redirect,function(e){var t=("/"===e.path.charAt(0)?e.path:"/"+e.path)+e.query;avalon.router.navigate(t,2)});else{var n=this;n.routes[e.path]=e,avalon.router.add(e.path,function(){var e=this,t=n.routes[this.path];if(t){t.title&&(avalon.title.text=t.title);var a=[],i=[],s=void 0,l=void 0;do{s=t.component,l=s.name,avalon.isFunction(s)&&(s.loadedName?l=s.loadedName:i[a.length]=s),a.push(l)}while(t=t.parent);o(i,a,function(){a.reverse(),avalon.router.route=avalon.mix({depth:0,matched:a},e),n.dispatch()})}})}e.children&&e.children.length&&e.children.forEach(function(n){n.parent=e,n.path=e.path+"/"+n.path,t.register(n)})},t["default"]=i},function(e,t,n){"use strict";function a(e){return e.replace(/[^#]+#?!?/,"")}function i(e){for(var t,n=document.getElementsByTagName("A"),a=0;t=n[a++];)if(t.name===e)return t}function o(e){var t=avalon(e).css("position");return"fixed"!==t?0:e.getBoundingClientRect().bottom}function s(e){var t=document.getElementById(e);if(t||(t=i(e)),t){t.scrollIntoView();var n=o(t);if(n){var a=t.getBoundingClientRect().top;window.scrollBy(0,a-n.top)}}else window.scrollTo(0,0)}var l=avalon.msie<=7,r=!!window.history.pushState,c=!(!("onhashchange"in window)||window.VBArray&&l),d={root:"/",html5:!1,hashPrefix:"!",iframeID:null,interval:50,autoScroll:!1},u={text:document.title,timer:null,delay:200},h={isinit:!0,hash:a(document.location.href),check:function(){a(document.location.href)!==this.hash&&this.onHashChanged()},start:function(e){if(this.started)throw new Error("avalon.history has already been started");this.started=!0,"boolean"==typeof e&&(e={html5:e}),e=avalon.mix({},d,e||{}),e.fireAnchor&&(e.autoScroll=!0);var t=e.root;/^\//.test(t)||avalon.error("root配置项必须以/字符开始, 以非/字符结束"),t.length>1&&(e.root=t.replace(/\/$/,""));var n=e.html5;switch(this.options=e,this.mode=n?"popstate":"hashchange",r||(n&&avalon.warn("浏览器不支持HTML5 pushState，平稳退化到onhashchange!"),this.mode="hashchange"),c||(this.mode="iframepoll"),avalon.log("avalon run mmHistory in the ",this.mode,"mode"),this.mode){case"popstate":setTimeout(function(){window.onpopstate=h.onHashChanged},500);break;case"hashchange":window.onhashchange=h.onHashChanged;break;case"iframepoll":avalon.ready(function(){var t=document.createElement("iframe");if(t.id=e.iframeID||avalon.makeHashCode("ifr"),t.style.display="none",document.body.appendChild(t),h.iframe=t,h.writeFrame(a(document.location.href)),avalon.msie){var n=function(){"location"===event.propertyName&&setTimeout(function(){h.check()},1)};document.attachEvent("onpropertychange",n),h.onPropertyChange=n}h.intervalID=window.setInterval(function(){h.check()},e.interval)})}this.onHashChanged(),this.isinit=!1},stop:function(){switch(this.mode){case"popstate":window.onpopstate=avalon.noop;break;case"hashchange":window.onhashchange=avalon.noop;break;case"iframepoll":this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this.onPropertyChange&&document.detachEvent("onpropertychange",this.onPropertyChange),clearInterval(this.intervalID)}this.started=!1},setHash:function(e,t){switch(this.mode){case"iframepoll":if(t){var n=this.iframe;n&&(n.contentWindow._hash=e)}else this.writeFrame(e);break;case"popstate":var a=(this.options.root+"/"+e).replace(/\/+/g,"/"),i=t?"replaceState":"pushState";history[i]({},document.title,a),this.onHashChanged();break;default:var o=this.options.hashPrefix+e;t&&document.location.hash!==o&&history.back(),document.location.hash=o}},writeFrame:function(e){var t=h.iframe;try{var n=t.contentDocument||t.contentWindow.document}catch(t){var a=window.document.location,i=a.hash.substring(1),o=a.href;return window.document.location=o.replace(i,e),window.document.location.reload()}n.open(),n.write("<script>_hash = '"+e+"'; onload = parent.avalon.history.syncHash;<\/script>"),n.close()},syncHash:function(){var e=this._hash;return e!==a(document.location.href)&&(document.location.hash=e),this},getPath:function(){var e=document.location.pathname.replace(this.options.root,"");return"/"!==e.charAt(0)&&(e="/"+e),e},onHashChanged:function(e,t){t||(e="popstate"===h.mode?h.getPath():document.location.href.replace(/[^#]+#?!?/,"")),e=decodeURIComponent(e),e="/"===e.charAt(0)?e:"/"+e,(e!==h.hash||h.isinit)&&(h.hash=e,avalon.router&&(e=avalon.router.navigate(e,0)),t&&h.setHash(e),t&&h.options.autoScroll&&s(e.slice(1))),clearTimeout(u.timer),u.timer=setTimeout(function(){document.title!==u.text&&(document.title=u.text)},u.delay)}};avalon.bind(document,"click",function(e){if(h.started&&!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)&&!1!==e.returnValue){for(var t=e.path?e.path[0]:e.target||e.srcElement||{};"A"!==t.nodeName;)if(!(t=t.parentNode)||"BODY"===t.tagName)return;var n=t.getAttribute("href",2)||t.getAttribute("xlink:href")||"";"#!"===n.slice(0,2)&&null==t.getAttribute("download")&&"external"!==t.getAttribute("rel")&&(n.indexOf("mailto:")>-1||t.target&&"_self"!==t.target||(e.preventDefault(),h.onHashChanged(n.replace("#!",""),!0)))}}),avalon.title=u,e.exports=avalon.history=h},function(e,t,n){"use strict";function a(){this.rules=[]}function i(e){var t=e.split("?"),n={},a=t[0],i=t[1];if(i)for(var o,s=i.split("&"),l=s.length,r=0;r<l;r++)s[r]&&(o=s[r].split("="),n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]));return{path:a,query:n}}function o(e){return"/"===e||("string"==typeof e&&e.length>1&&"/"===e.charAt(0)||void 0)}function s(e){if("string"==typeof e)return e;var t=[];for(var n in e)"query"!==n&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function l(e,t,n){var a=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return a;var i=n?"?":"";return a+i+"("+t+")"+i}var r=(n(60),n(62)),c=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g;a.prototype=r,avalon.mix(r,{error:function(e){this.errorback=e},_pathToRegExp:function(e,t){for(var n,a,i,o,s=t.keys=[],r="^",d=0;n=c.exec(e);){a=n[2]||n[3],i=n[4]||("*"==n[1]?".*":"string"),o=e.substring(d,n.index);var u=this.$types[i],h={name:a};u&&(i=u.pattern,h.decode=u.decode),s.push(h),r+=l(o,i,!1),d=c.lastIndex}o=e.substring(d),r+=l(o)+(t.strict?t.last:"/?")+"$";var p="boolean"!=typeof t.caseInsensitive||t.caseInsensitive;return t.regexp=new RegExp(r,p?"i":void 0),t},add:function(e,t,n){var a=this.rules;"/"!==e.charAt(0)&&avalon.error("avalon.router.add的第一个参数必须以/开头"),n=n||{},n.callback=t,e.length>2&&"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1),n.last="/"),avalon.Array.ensure(a,this._pathToRegExp(e,n))},to:function(e,t){e=e.trim();for(var n,a=this.rules,i=0;n=a[i++];){var o=e.match(n.regexp);if(o){n.query=t||{},n.path=e,n.params={};var s=n.keys;return o.shift(),s.length&&this._parseArgs(o,n),n.callback.apply(n,o)}}this.errorback&&this.errorback()},_parseArgs:function(e,t){for(var n=t.keys,a=0,i=n.length;a<i;a++){var o=n[a],s=e[a]||"";if("function"==typeof o.decode)var l=o.decode(s);else try{l=JSON.parse(s)}catch(e){l=s}e[a]=t.params[o.name]=l}},navigate:function(e,t){var n=i(e),a=this.to(n.path,n.query);return o(a)&&(e=a),avalon.router.setLastPath(e),1===t?avalon.history.setHash(e,!0):2===t&&avalon.history.setHash(e),e},when:function(e,t,n){var a=this,e=e instanceof Array?e:[e];return avalon.each(e,function(e,i){a.add(i,function(){var e=a.urlFormate(t,this.params,this.query);n?n.call(a,e):a.navigate(e.path+e.query)})}),this},urlFormate:function(e,t,n){var n=n?s(n):"";return{path:e.replace(c,function(e){var n=e.replace(/[\{\}]/g,"").split(":");return n=n[0]?n[0]:n[1],void 0!==t[n]?t[n]:""}).replace(/^\//g,""),query:n}},$types:{date:{pattern:"[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])",decode:function(e){return new Date(e.replace(/\-/g,"/"))}},string:{pattern:"[^\\/]*",decode:function(e){return e}},bool:{decode:function(e){return 0!==parseInt(e,10)},pattern:"0|1"},"int":{decode:function(e){return parseInt(e,10)},pattern:"\\d+"}}}),e.exports=avalon.router=new a},function(e,t,n){"use strict";function a(e){return String(e).replace(/[,;"\\=\s%]/g,function(e){return encodeURIComponent(e)})}var i={};if(function(){try{return localStorage.setItem("avalon",1),localStorage.removeItem("avalon"),!0}catch(e){return!1}}()){i.getLastPath=function(){return localStorage.getItem("msLastPath")};var o;i.setLastPath=function(e){o&&(clearTimeout(o),o=null),localStorage.setItem("msLastPath",e),o=setTimeout(function(){localStorage.removItem("msLastPath")},864e5)}}else{var s=function(e,t){var n=new Date;n.setTime(n.getTime()+864e5),document.cookie=a(e)+"="+a(t)+";expires="+n.toGMTString()},l=function(e){var t=String(document.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)"))||["",""];return decodeURIComponent(t[1])};i.getLastPath=function(){return l.getItem("msLastPath")},i.setLastPath=function(e){s("msLastPath",e)}}e.exports=i},function(e,t,n){"use strict";t.__esModule=!0;var a=n(1),i=n(9),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s={autoLogin:function(e){var t=e.state,n=e.commit;t.autoLogin&&(n(a.USER.LOGIN),s.getUserData({state:t,commit:n}))},login:function(e,t){var n=e.state,i=e.commit;n.isLogin||(i(a.USER.LOGIN,t),s.getUserData({state:n,commit:i}))},logout:function(e){var t=e.state,n=e.commit;t.isLogin&&n(a.USER.LOGOUT)},getUserData:function(e){var t=e.state,n=e.commit;return(0,o["default"])({url:a.USER.DATA,dataType:"jsonp",jsonp:"callback",data:{uid:t.user.uid}}).done(function(e){e&&200==e.status&&n(a.USER.DATA,e.data)}).fail(function(e){avalon.log(e)})}};t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(65),o=a(i),s=n(63),l=a(s),r=n(19);t["default"]={state:{isLogin:!1,autoLogin:"1"==r.cookie.get("autoLogin"),user:{uid:"",nick:"",avatar:""}},mutations:o["default"],actions:l["default"]}},function(e,t,n){"use strict";t.__esModule=!0;var a,i=n(3),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s=n(1),l=n(19),r=(a={},(0,o["default"])(a,s.USER.LOGIN,function(e,t){e.isLogin=!0,t?(e.user={uid:t.userid,nick:t.usernick},t.autoLogin&&(l.cookie.set("userid",t.userid),l.cookie.set("usernick",t.usernick),l.cookie.set("autoLogin",1))):e.user={uid:l.cookie.get("userid",0),nick:l.cookie.get("usernick","")}}),(0,o["default"])(a,s.USER.LOGOUT,function(e){e.isLogin=!1,e.autoLogin=!1,l.cookie.set("userid",0),l.cookie.set("usernick",""),l.cookie.set("autoLogin",0),e.user={uid:"",nick:"",avatar:""}}),(0,o["default"])(a,s.USER.DATA,function(e,t){var n=e.user;delete t.uid,avalon.mix(n,t)}),a);t["default"]=r},function(e,t,n){"use strict";t.__esModule=!0;var a=n(1),i=n(9),o=function(e){return e&&e.__esModule?e:{"default":e}}(i),s={getVideoList:function(e,t){var n=(e.state,e.commit);return(0,o["default"])({url:a.VIDEO.LIST,dataType:"jsonp",jsonp:"callback",data:t}).done(function(e){e&&200==e.status&&n(a.VIDEO.LIST,e.data)}).fail(function(e){avalon.log(e)})}};t["default"]=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(68),o=a(i),s=n(66),l=a(s);t["default"]={state:{$sort:[{key:"new",text:"最新"},{key:"hot",text:"最热"}],sort:"new",$filter:[{key:"all",text:"全部",value:0},{key:"upload",text:"上传",value:1},{key:"audit",text:"审核",value:2},{key:"publish",text:"发行",value:3}],filter:0,$perNum:4,page:-1,$list:[]},mutations:o["default"],actions:l["default"]}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),i=function(e){return e&&e.__esModule?e:{"default":e}}(a),o=n(1),s=(0,i["default"])({},o.VIDEO.LIST,function(e,t){e.$list=t});t["default"]=s}],[42]);
//# sourceMappingURL=app.js.map